"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[488],{28453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>l});var i=n(96540);const t={},r=i.createContext(t);function d(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(r.Provider,{value:s},e.children)}},54125:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"api/batch","title":"Batch API","description":"Execute multiple analytics queries in a single request","source":"@site/docs/api/batch.mdx","sourceDirName":"api","slug":"/api/batch","permalink":"/api/batch","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19,"title":"Batch API","description":"Execute multiple analytics queries in a single request"},"sidebar":"tutorialSidebar","previous":{"title":"Rate Limits","permalink":"/api/rate-limits"},"next":{"title":"Privacy & Consentless Analytics","permalink":"/security-privacy/"}}');var t=n(74848),r=n(28453);const d={sidebar_position:19,title:"Batch API",description:"Execute multiple analytics queries in a single request"},l="Batch API",c={},a=[{value:"Endpoint",id:"endpoint",level:2},{value:"Request format",id:"request-format",level:2},{value:"Query fields",id:"query-fields",level:3},{value:"Options",id:"options",level:3},{value:"Supported endpoints",id:"supported-endpoints",level:2},{value:"Response format",id:"response-format",level:2},{value:"Query statuses",id:"query-statuses",level:3},{value:"Validation endpoint",id:"validation-endpoint",level:2},{value:"Limits",id:"limits",level:2}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"batch-api",children:"Batch API"})}),"\n",(0,t.jsx)(s.p,{children:"The Batch API lets you execute multiple analytics queries in a single HTTP request. This is useful when building dashboards or reports that need data from several endpoints simultaneously."}),"\n",(0,t.jsx)(s.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"POST /api/v1/batch\n"})}),"\n",(0,t.jsx)(s.h2,{id:"request-format",children:"Request format"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "queries": [\n    {\n      "id": "overview",\n      "endpoint": "/stats/overview",\n      "params": {\n        "account_id": "my-site",\n        "period": "30d"\n      }\n    },\n    {\n      "id": "pages",\n      "endpoint": "/stats/pages",\n      "params": {\n        "account_id": "my-site",\n        "period": "30d",\n        "page_size": 10\n      }\n    },\n    {\n      "id": "sources",\n      "endpoint": "/stats/sources",\n      "params": {\n        "account_id": "my-site",\n        "period": "30d"\n      },\n      "depends_on": ["overview"]\n    }\n  ],\n  "options": {\n    "fail_fast": false,\n    "parallel_limit": 5,\n    "include_timing": true\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"query-fields",children:"Query fields"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Field"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Required"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"id"})}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Unique identifier for this query (alphanumeric)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"endpoint"})}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsxs)(s.td,{children:["Analytics endpoint path (must start with ",(0,t.jsx)(s.code,{children:"/stats/"}),")"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"params"})}),(0,t.jsx)(s.td,{children:"object"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Parameters for the endpoint"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"depends_on"})}),(0,t.jsx)(s.td,{children:"string[]"}),(0,t.jsx)(s.td,{children:"No"}),(0,t.jsx)(s.td,{children:"Query IDs that must complete before this one runs"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"options",children:"Options"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Option"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"fail_fast"})}),(0,t.jsx)(s.td,{children:"false"}),(0,t.jsx)(s.td,{children:"Stop execution on first error"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"parallel_limit"})}),(0,t.jsx)(s.td,{children:"5"}),(0,t.jsx)(s.td,{children:"Maximum concurrent queries (1-10)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"include_timing"})}),(0,t.jsx)(s.td,{children:"true"}),(0,t.jsx)(s.td,{children:"Include execution time per query"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"supported-endpoints",children:"Supported endpoints"}),"\n",(0,t.jsxs)(s.p,{children:["All ",(0,t.jsx)(s.code,{children:"/stats/"})," endpoints are available:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/overview"})," \u2014 Traffic overview"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/pages"})," \u2014 Pages report"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/sources"})," \u2014 Traffic sources"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/mediums"})," \u2014 UTM mediums"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/campaigns"})," \u2014 UTM campaigns"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/terms"})," \u2014 UTM terms"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/referrers"})," \u2014 Referrers"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/countries"})," \u2014 Geographic data"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/devices"})," \u2014 Device types"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/browsers"})," \u2014 Browsers"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/os"})," \u2014 Operating systems"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/conversions"})," \u2014 Conversions"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/microconversions"})," \u2014 Microconversions"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/funnel"})," \u2014 Funnel analysis"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/landing-pages"})," \u2014 Landing pages"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/stats/channels"})," \u2014 Channel groups"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"response-format",children:"Response format"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "batch_id": "uuid",\n  "status": "completed",\n  "results": {\n    "overview": {\n      "status": "success",\n      "data": { },\n      "timing_ms": 45\n    },\n    "pages": {\n      "status": "success",\n      "data": { },\n      "timing_ms": 32\n    },\n    "sources": {\n      "status": "success",\n      "data": { },\n      "timing_ms": 28\n    }\n  },\n  "meta": {\n    "total_queries": 3,\n    "successful": 3,\n    "failed": 0,\n    "skipped": 0,\n    "total_timing_ms": 105\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"query-statuses",children:"Query statuses"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Status"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"success"})}),(0,t.jsx)(s.td,{children:"Query completed successfully"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"error"})}),(0,t.jsxs)(s.td,{children:["Query failed (see ",(0,t.jsx)(s.code,{children:"error"})," field)"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"skipped"})}),(0,t.jsx)(s.td,{children:"Skipped because a dependency failed"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"validation-endpoint",children:"Validation endpoint"}),"\n",(0,t.jsx)(s.p,{children:"Validate your batch request without executing it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"POST /api/v1/batch/validate\n"})}),"\n",(0,t.jsx)(s.p,{children:"Returns the planned execution order and parallel groups:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "valid": true,\n  "query_count": 3,\n  "execution_order": ["overview", "pages", "sources"],\n  "parallel_groups": [["overview", "pages"], ["sources"]]\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"limits",children:"Limits"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Maximum 50 queries per batch"}),"\n",(0,t.jsx)(s.li,{children:"All query IDs must be unique"}),"\n",(0,t.jsx)(s.li,{children:"Circular dependencies are not allowed"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);