"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3965],{3532:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"api/alerts","title":"Alerts","description":"Configure and manage traffic anomaly alerts.","source":"@site/docs/api/alerts.mdx","sourceDirName":"api","slug":"/api/alerts","permalink":"/api/alerts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13,"title":"Alerts","description":"Configure and manage traffic anomaly alerts."},"sidebar":"tutorialSidebar","previous":{"title":"Webhooks","permalink":"/api/webhooks"},"next":{"title":"Exports","permalink":"/api/exports"}}');var t=s(74848),i=s(28453);const l={sidebar_position:13,title:"Alerts",description:"Configure and manage traffic anomaly alerts."},d="Alerts API",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Alert Rules",id:"alert-rules",level:2},{value:"List Alert Rules",id:"list-alert-rules",level:3},{value:"Create Alert Rule",id:"create-alert-rule",level:3},{value:"Available Metrics",id:"available-metrics",level:3},{value:"Comparison Periods",id:"comparison-periods",level:3},{value:"Get Alert Rule",id:"get-alert-rule",level:3},{value:"Update Alert Rule",id:"update-alert-rule",level:3},{value:"Delete Alert Rule",id:"delete-alert-rule",level:3},{value:"Test Alert",id:"test-alert",level:2},{value:"Test Alert Rule",id:"test-alert-rule",level:3},{value:"Alert History",id:"alert-history",level:2},{value:"Get Alert History",id:"get-alert-history",level:3},{value:"Alert Statuses",id:"alert-statuses",level:3},{value:"Acknowledge Alert",id:"acknowledge-alert",level:3},{value:"Statistics",id:"statistics",level:2},{value:"Get Alert Statistics",id:"get-alert-statistics",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Python - Create and Monitor Alerts",id:"python---create-and-monitor-alerts",level:3},{value:"JavaScript - React Hook for Alerts",id:"javascript---react-hook-for-alerts",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Start with Conservative Thresholds",id:"1-start-with-conservative-thresholds",level:3},{value:"2. Use Filters for Specific Segments",id:"2-use-filters-for-specific-segments",level:3},{value:"3. Combine with Webhooks",id:"3-combine-with-webhooks",level:3},{value:"4. Review and Resolve Alerts",id:"4-review-and-resolve-alerts",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"alerts-api",children:"Alerts API"})}),"\n",(0,t.jsx)(n.p,{children:"Create alert rules to get notified when traffic anomalies occur."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The Alerts API allows you to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create rules for traffic anomaly detection"}),"\n",(0,t.jsx)(n.li,{children:"Configure notification channels (email, webhook)"}),"\n",(0,t.jsx)(n.li,{children:"View alert history and statistics"}),"\n",(0,t.jsx)(n.li,{children:"Acknowledge and manage triggered alerts"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Base path:"})," ",(0,t.jsx)(n.code,{children:"/alerts"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"alert-rules",children:"Alert Rules"}),"\n",(0,t.jsx)(n.h3,{id:"list-alert-rules",children:"List Alert Rules"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /alerts/rules?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"site_id"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Required. Site ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"include_inactive"})}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"Include disabled rules"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "rules": [\n    {\n      "id": 1,\n      "site_id": "acme",\n      "name": "Traffic Drop Alert",\n      "description": "Alert when traffic drops significantly",\n      "metric": "entrances",\n      "condition": "decrease",\n      "threshold_percent": 25,\n      "comparison_period": "previous_week",\n      "notification_channels": ["email", "webhook"],\n      "is_active": true,\n      "last_triggered_at": "2025-01-05T10:30:00Z",\n      "created_at": "2024-12-01T10:00:00Z"\n    }\n  ],\n  "total": 1\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"create-alert-rule",children:"Create Alert Rule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /alerts/rules?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Revenue Drop",\n  "description": "Alert when revenue drops more than 30%",\n  "metric": "revenue",\n  "condition": "decrease",\n  "threshold_percent": 30,\n  "comparison_period": "previous_week",\n  "filters": {\n    "utm_medium": "cpc"\n  },\n  "notification_channels": ["email"],\n  "email_recipients": ["alerts@company.com"],\n  "webhook_endpoint_id": "550e8400-e29b-41d4-a716-446655440000"\n}\n'})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Rule name (1-255 chars)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"description"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Rule description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"metric"})}),(0,t.jsx)(n.td,{children:"enum"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Metric to monitor"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"condition"})}),(0,t.jsx)(n.td,{children:"enum"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"increase"})," or ",(0,t.jsx)(n.code,{children:"decrease"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"threshold_percent"})}),(0,t.jsx)(n.td,{children:"number"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Threshold percentage (1-100)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"comparison_period"})}),(0,t.jsx)(n.td,{children:"enum"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Comparison period"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"filters"})}),(0,t.jsx)(n.td,{children:"object"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Filter conditions"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"notification_channels"})}),(0,t.jsx)(n.td,{children:"string[]"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"email"}),", ",(0,t.jsx)(n.code,{children:"webhook"}),", or both"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"email_recipients"})}),(0,t.jsx)(n.td,{children:"string[]"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Email addresses for notifications"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"webhook_endpoint_id"})}),(0,t.jsx)(n.td,{children:"uuid"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Webhook endpoint to notify"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"available-metrics",children:"Available Metrics"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"entrances"})}),(0,t.jsx)(n.td,{children:"Session starts"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"page_views"})}),(0,t.jsx)(n.td,{children:"Total pageviews"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"conversions"})}),(0,t.jsx)(n.td,{children:"Conversion count"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"revenue"})}),(0,t.jsx)(n.td,{children:"Total revenue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bounce_rate"})}),(0,t.jsx)(n.td,{children:"Bounce rate percentage"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"engaged_entrances"})}),(0,t.jsx)(n.td,{children:"Engaged sessions"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"comparison-periods",children:"Comparison Periods"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Period"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"previous_day"})}),(0,t.jsx)(n.td,{children:"Same time yesterday"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"previous_week"})}),(0,t.jsx)(n.td,{children:"Same day last week"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"previous_month"})}),(0,t.jsx)(n.td,{children:"Same day last month"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"previous_year"})}),(0,t.jsx)(n.td,{children:"Same day last year"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response (201 Created):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": 2,\n  "site_id": "acme",\n  "name": "Revenue Drop",\n  "metric": "revenue",\n  "condition": "decrease",\n  "threshold_percent": 30,\n  "comparison_period": "previous_week",\n  "is_active": true,\n  "created_at": "2025-01-10T14:30:00Z"\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"get-alert-rule",children:"Get Alert Rule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /alerts/rules/{rule_id}?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"update-alert-rule",children:"Update Alert Rule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"PATCH /alerts/rules/{rule_id}?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Updated Name",\n  "threshold_percent": 40,\n  "is_active": false\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"All fields are optional. Only provided fields are updated."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"delete-alert-rule",children:"Delete Alert Rule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"DELETE /alerts/rules/{rule_id}?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"test-alert",children:"Test Alert"}),"\n",(0,t.jsx)(n.h3,{id:"test-alert-rule",children:"Test Alert Rule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /alerts/rules/{rule_id}/test?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Test a rule without triggering actual notifications."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request Body (optional):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "send_notification": true\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"send_notification: true"})," to send a real test notification."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "would_trigger": true,\n  "current_value": 650,\n  "comparison_value": 1000,\n  "change_percent": -35.0,\n  "threshold_percent": 25,\n  "message": "Rule would trigger: entrances decreased 35% vs previous week",\n  "notification_sent": false\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"alert-history",children:"Alert History"}),"\n",(0,t.jsx)(n.h3,{id:"get-alert-history",children:"Get Alert History"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /alerts/history?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"site_id"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Required. Site ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rule_id"})}),(0,t.jsx)(n.td,{children:"int"}),(0,t.jsx)(n.td,{children:"Filter by specific rule"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Filter by status"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"limit"})}),(0,t.jsx)(n.td,{children:"int"}),(0,t.jsx)(n.td,{children:"Max results (default: 50)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"offset"})}),(0,t.jsx)(n.td,{children:"int"}),(0,t.jsx)(n.td,{children:"Pagination offset"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"alert-statuses",children:"Alert Statuses"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"triggered"})}),(0,t.jsx)(n.td,{children:"Alert fired, awaiting acknowledgment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"acknowledged"})}),(0,t.jsx)(n.td,{children:"User acknowledged the alert"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"resolved"})}),(0,t.jsx)(n.td,{children:"Alert condition no longer active"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dismissed"})}),(0,t.jsx)(n.td,{children:"User dismissed without action"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "alerts": [\n    {\n      "id": 123,\n      "rule_id": 1,\n      "rule_name": "Traffic Drop Alert",\n      "status": "triggered",\n      "metric": "entrances",\n      "current_value": 650,\n      "comparison_value": 1000,\n      "change_percent": -35.0,\n      "threshold_percent": 25,\n      "triggered_at": "2025-01-10T10:30:00Z",\n      "acknowledged_at": null,\n      "acknowledged_by": null,\n      "notes": null\n    }\n  ],\n  "total": 45\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"acknowledge-alert",children:"Acknowledge Alert"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"PATCH /alerts/history/{alert_id}?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "acknowledged",\n  "notes": "Investigating the traffic drop"\n}\n'})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status"})}),(0,t.jsx)(n.td,{children:"enum"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"acknowledged"}),", ",(0,t.jsx)(n.code,{children:"resolved"}),", or ",(0,t.jsx)(n.code,{children:"dismissed"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"notes"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Optional notes about the action taken"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": 123,\n  "status": "acknowledged",\n  "acknowledged_at": "2025-01-10T14:30:00Z",\n  "acknowledged_by": "user@company.com",\n  "notes": "Investigating the traffic drop"\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"statistics",children:"Statistics"}),"\n",(0,t.jsx)(n.h3,{id:"get-alert-statistics",children:"Get Alert Statistics"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /alerts/stats?site_id={site_id}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total_rules": 5,\n  "active_rules": 4,\n  "alerts_last_7_days": 12,\n  "alerts_last_30_days": 45,\n  "by_status": {\n    "triggered": 3,\n    "acknowledged": 5,\n    "resolved": 30,\n    "dismissed": 7\n  },\n  "by_metric": {\n    "entrances": 25,\n    "revenue": 15,\n    "conversions": 5\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,t.jsx)(n.h3,{id:"python---create-and-monitor-alerts",children:"Python - Create and Monitor Alerts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import requests\n\nAPI_KEY = "sm_your_api_key"\nBASE_URL = "https://my.sealmetrics.com/api/v1"\nACCOUNT_ID = "my-account"\n\ndef create_alert_rule(name: str, metric: str, threshold: int) -> dict:\n    """Create a new alert rule."""\n    response = requests.post(\n        f"{BASE_URL}/alerts/rules",\n        headers={"X-API-Key": API_KEY},\n        params={"site_id": ACCOUNT_ID},\n        json={\n            "name": name,\n            "metric": metric,\n            "condition": "decrease",\n            "threshold_percent": threshold,\n            "comparison_period": "previous_week",\n            "notification_channels": ["email"],\n            "email_recipients": ["alerts@company.com"]\n        }\n    )\n    response.raise_for_status()\n    return response.json()\n\ndef get_active_alerts() -> list:\n    """Get all triggered alerts."""\n    response = requests.get(\n        f"{BASE_URL}/alerts/history",\n        headers={"X-API-Key": API_KEY},\n        params={\n            "site_id": ACCOUNT_ID,\n            "status": "triggered"\n        }\n    )\n    response.raise_for_status()\n    return response.json()["alerts"]\n\ndef acknowledge_alert(alert_id: int, notes: str):\n    """Acknowledge an alert."""\n    response = requests.patch(\n        f"{BASE_URL}/alerts/history/{alert_id}",\n        headers={"X-API-Key": API_KEY},\n        params={"site_id": ACCOUNT_ID},\n        json={\n            "status": "acknowledged",\n            "notes": notes\n        }\n    )\n    response.raise_for_status()\n\n# Usage\nrule = create_alert_rule("Traffic Alert", "entrances", 25)\nprint(f"Created rule: {rule[\'id\']}")\n\nalerts = get_active_alerts()\nfor alert in alerts:\n    print(f"Alert: {alert[\'rule_name\']} - {alert[\'change_percent\']}%")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"javascript---react-hook-for-alerts",children:"JavaScript - React Hook for Alerts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import { useState, useEffect } from 'react';\n\nfunction useAlerts(accountId) {\n  const [alerts, setAlerts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchAlerts() {\n      const response = await fetch(\n        `${BASE_URL}/alerts/history?site_id=${accountId}&status=triggered`,\n        { headers: { 'X-API-Key': API_KEY } }\n      );\n      const data = await response.json();\n      setAlerts(data.alerts);\n      setLoading(false);\n    }\n\n    fetchAlerts();\n    const interval = setInterval(fetchAlerts, 60000); // Poll every minute\n\n    return () => clearInterval(interval);\n  }, [accountId]);\n\n  const acknowledgeAlert = async (alertId, notes) => {\n    await fetch(\n      `${BASE_URL}/alerts/history/${alertId}?site_id=${accountId}`,\n      {\n        method: 'PATCH',\n        headers: {\n          'X-API-Key': API_KEY,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ status: 'acknowledged', notes })\n      }\n    );\n    // Refresh alerts\n    setAlerts(alerts.filter(a => a.id !== alertId));\n  };\n\n  return { alerts, loading, acknowledgeAlert };\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-start-with-conservative-thresholds",children:"1. Start with Conservative Thresholds"}),"\n",(0,t.jsx)(n.p,{children:"Begin with higher thresholds to avoid alert fatigue:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "threshold_percent": 40\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Adjust lower as you understand normal traffic patterns."}),"\n",(0,t.jsx)(n.h3,{id:"2-use-filters-for-specific-segments",children:"2. Use Filters for Specific Segments"}),"\n",(0,t.jsx)(n.p,{children:"Create targeted alerts for important traffic sources:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Paid Traffic Drop",\n  "filters": {\n    "utm_medium": "cpc"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-combine-with-webhooks",children:"3. Combine with Webhooks"}),"\n",(0,t.jsx)(n.p,{children:"Integrate with Slack or other tools:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a webhook endpoint"}),"\n",(0,t.jsx)(n.li,{children:"Reference it in alert rules:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "notification_channels": ["webhook"],\n  "webhook_endpoint_id": "550e8400-..."\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-review-and-resolve-alerts",children:"4. Review and Resolve Alerts"}),"\n",(0,t.jsx)(n.p,{children:"Don't let alerts pile up:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Auto-resolve old alerts\nold_alerts = get_alerts(status="triggered", older_than_days=7)\nfor alert in old_alerts:\n    acknowledge_alert(alert["id"], "Auto-resolved after 7 days")\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(96540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);