"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9982],{28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var t=s(96540);const r={},i=t.createContext(r);function c(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(i.Provider,{value:n},e.children)}},82893:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"api/api-tokens","title":"API Tokens","description":"Create and manage API tokens for programmatic access.","source":"@site/docs/api/api-tokens.mdx","sourceDirName":"api","slug":"/api/api-tokens","permalink":"/api/api-tokens","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"API Tokens","description":"Create and manage API tokens for programmatic access."},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/api/authentication"},"next":{"title":"Rate Limits","permalink":"/api/rate-limits"}}');var r=s(74848),i=s(28453);const c={sidebar_position:4,title:"API Tokens",description:"Create and manage API tokens for programmatic access."},a="API Tokens",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Scopes",id:"scopes",level:2},{value:"List Available Scopes",id:"list-available-scopes",level:3},{value:"List Tokens",id:"list-tokens",level:2},{value:"Create Token",id:"create-token",level:2},{value:"Get Token",id:"get-token",level:2},{value:"Revoke Token",id:"revoke-token",level:2},{value:"Using API Tokens",id:"using-api-tokens",level:2},{value:"Token Best Practices",id:"token-best-practices",level:2},{value:"1. Use Minimal Scopes",id:"1-use-minimal-scopes",level:3},{value:"2. Restrict to Specific Accounts",id:"2-restrict-to-specific-accounts",level:3},{value:"3. Set Appropriate Expiration",id:"3-set-appropriate-expiration",level:3},{value:"4. Rotate Tokens Regularly",id:"4-rotate-tokens-regularly",level:3},{value:"5. Never Commit Tokens",id:"5-never-commit-tokens",level:3},{value:"Token Errors",id:"token-errors",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Python",id:"python",level:3},{value:"JavaScript",id:"javascript",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-tokens",children:"API Tokens"})}),"\n",(0,r.jsx)(n.p,{children:"Create and manage personal API tokens for programmatic access to the Sealmetrics API."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"API tokens provide:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Long-lived authentication for integrations"}),"\n",(0,r.jsx)(n.li,{children:"Scoped permissions per token"}),"\n",(0,r.jsx)(n.li,{children:"Optional account restrictions"}),"\n",(0,r.jsx)(n.li,{children:"Automatic expiration"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Base path:"})," ",(0,r.jsx)(n.code,{children:"/api-tokens"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"scopes",children:"Scopes"}),"\n",(0,r.jsx)(n.p,{children:"Each token can be granted specific permissions:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scope"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"read"})}),(0,r.jsx)(n.td,{children:"Read analytics data"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"write"})}),(0,r.jsx)(n.td,{children:"Create/update resources"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin"})}),(0,r.jsx)(n.td,{children:"Full access including user management"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"accounts:read"})}),(0,r.jsx)(n.td,{children:"Read account settings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"accounts:write"})}),(0,r.jsx)(n.td,{children:"Modify account settings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"exports:create"})}),(0,r.jsx)(n.td,{children:"Create data exports"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"webhooks:manage"})}),(0,r.jsx)(n.td,{children:"Manage webhook endpoints"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"list-available-scopes",children:"List Available Scopes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /api-tokens/scopes\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "scopes": [\n      {\n        "scope": "read",\n        "name": "Read",\n        "description": "Read analytics data"\n      },\n      {\n        "scope": "write",\n        "name": "Write",\n        "description": "Create and update resources"\n      },\n      {\n        "scope": "admin",\n        "name": "Admin",\n        "description": "Full administrative access"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"list-tokens",children:"List Tokens"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /api-tokens\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"include_inactive"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{children:"Include revoked tokens"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "tokens": [\n      {\n        "id": 1,\n        "name": "Production API",\n        "token_prefix": "sm_abc",\n        "scopes": ["read", "write"],\n        "account_ids": ["acme-corp"],\n        "is_active": true,\n        "expires_at": "2026-01-10T00:00:00Z",\n        "last_used_at": "2025-01-10T14:30:00Z",\n        "created_at": "2025-01-01T10:00:00Z"\n      }\n    ],\n    "total": 1\n  }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"create-token",children:"Create Token"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"POST /api-tokens\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My Integration",\n  "scopes": ["read", "exports:create"],\n  "account_ids": ["acme-corp", "other-site"],\n  "expires_in_days": 365\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Token name (1-255 chars)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scopes"})}),(0,r.jsx)(n.td,{children:"string[]"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Permission scopes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"account_ids"})}),(0,r.jsx)(n.td,{children:"string[]"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Restrict to specific accounts"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expires_in_days"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Days until expiration (default: 365)"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (201 Created):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "id": 2,\n    "name": "My Integration",\n    "token": "sm_abc123def456ghi789...",\n    "token_prefix": "sm_abc",\n    "scopes": ["read", "exports:create"],\n    "account_ids": ["acme-corp", "other-site"],\n    "is_active": true,\n    "expires_at": "2026-01-10T00:00:00Z",\n    "created_at": "2025-01-10T14:30:00Z"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important:"})," The full ",(0,r.jsx)(n.code,{children:"token"})," value is only returned once. Store it securely."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"get-token",children:"Get Token"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /api-tokens/{token_id}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "id": 1,\n    "name": "Production API",\n    "token_prefix": "sm_abc",\n    "scopes": ["read", "write"],\n    "account_ids": ["acme-corp"],\n    "is_active": true,\n    "expires_at": "2026-01-10T00:00:00Z",\n    "last_used_at": "2025-01-10T14:30:00Z",\n    "created_at": "2025-01-01T10:00:00Z"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"revoke-token",children:"Revoke Token"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"DELETE /api-tokens/{token_id}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Revokes a token immediately. This action cannot be undone."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "id": 1,\n    "name": "Production API",\n    "is_active": false,\n    "revoked_at": "2025-01-10T14:30:00Z"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"using-api-tokens",children:"Using API Tokens"}),"\n",(0,r.jsxs)(n.p,{children:["Include the token in the ",(0,r.jsx)(n.code,{children:"X-API-Key"})," header:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://my.sealmetrics.com/api/v1/stats/overview?account_id=acme" \\\n  -H "X-API-Key: sm_abc123def456ghi789..."\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"token-best-practices",children:"Token Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-use-minimal-scopes",children:"1. Use Minimal Scopes"}),"\n",(0,r.jsx)(n.p,{children:"Only grant the scopes your integration needs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Read-only Dashboard",\n  "scopes": ["read"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-restrict-to-specific-accounts",children:"2. Restrict to Specific Accounts"}),"\n",(0,r.jsx)(n.p,{children:"If your integration only needs access to certain accounts:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Client Dashboard",\n  "scopes": ["read"],\n  "account_ids": ["client-a", "client-b"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-set-appropriate-expiration",children:"3. Set Appropriate Expiration"}),"\n",(0,r.jsx)(n.p,{children:"For temporary integrations, use short expiration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Audit Script",\n  "scopes": ["read"],\n  "expires_in_days": 7\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-rotate-tokens-regularly",children:"4. Rotate Tokens Regularly"}),"\n",(0,r.jsx)(n.p,{children:"Create a new token before the old one expires:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Create new token\nnew_token = create_token("Production API v2", scopes=["read", "write"])\n\n# Update your application config\nupdate_config(new_token)\n\n# Revoke old token after confirming new one works\nrevoke_token(old_token_id)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-never-commit-tokens",children:"5. Never Commit Tokens"}),"\n",(0,r.jsx)(n.p,{children:"Store tokens in environment variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# .env file (never commit!)\nSEALMETRICS_API_KEY=sm_abc123...\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nAPI_KEY = os.environ["SEALMETRICS_API_KEY"]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"token-errors",children:"Token Errors"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"HTTP Code"}),(0,r.jsx)(n.th,{children:"Error"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"401"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"invalid_api_key"})}),(0,r.jsx)(n.td,{children:"Token not found or revoked"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"401"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"token_expired"})}),(0,r.jsx)(n.td,{children:"Token has expired"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"403"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"insufficient_scope"})}),(0,r.jsx)(n.td,{children:"Token lacks required scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"403"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"account_not_allowed"})}),(0,r.jsx)(n.td,{children:"Account not in token's allowed list"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import requests\n\nBASE_URL = "https://my.sealmetrics.com/api/v1"\n\ndef create_api_token(auth_token: str, name: str, scopes: list) -> dict:\n    """Create a new API token."""\n    response = requests.post(\n        f"{BASE_URL}/api-tokens",\n        headers={"Authorization": f"Bearer {auth_token}"},\n        json={\n            "name": name,\n            "scopes": scopes,\n            "expires_in_days": 365\n        }\n    )\n    response.raise_for_status()\n    return response.json()["data"]\n\ndef revoke_token(auth_token: str, token_id: int):\n    """Revoke an API token."""\n    response = requests.delete(\n        f"{BASE_URL}/api-tokens/{token_id}",\n        headers={"Authorization": f"Bearer {auth_token}"}\n    )\n    response.raise_for_status()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"javascript",children:"JavaScript"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"async function createApiToken(authToken, name, scopes) {\n  const response = await fetch(`${BASE_URL}/api-tokens`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${authToken}`,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name,\n      scopes,\n      expires_in_days: 365\n    })\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to create token: ${response.status}`);\n  }\n\n  const { data } = await response.json();\n  return data;\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);