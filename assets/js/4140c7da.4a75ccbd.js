"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2465],{28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var i=s(96540);const r={},t=i.createContext(r);function d(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:n},e.children)}},57934:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"api/authentication","title":"Authentication","description":"The API supports two authentication methods: API Keys and JWT tokens.","source":"@site/docs/api/authentication.mdx","sourceDirName":"api","slug":"/api/authentication","permalink":"/api/authentication","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Authentication"},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start","permalink":"/api/quick-start"},"next":{"title":"API Tokens","permalink":"/api/api-tokens"}}');var r=s(74848),t=s(28453);const d={sidebar_position:3,title:"Authentication"},c="Authentication",l={},o=[{value:"API Keys",id:"api-keys",level:2},{value:"Obtaining an API Key",id:"obtaining-an-api-key",level:3},{value:"Using API Keys",id:"using-api-keys",level:3},{value:"API Key Format",id:"api-key-format",level:3},{value:"API Key Security",id:"api-key-security",level:3},{value:"JWT Bearer Tokens",id:"jwt-bearer-tokens",level:2},{value:"Obtaining a Token",id:"obtaining-a-token",level:3},{value:"Using JWT Tokens",id:"using-jwt-tokens",level:3},{value:"Token Refresh",id:"token-refresh",level:3},{value:"JWT Claims",id:"jwt-claims",level:3},{value:"Authentication Errors",id:"authentication-errors",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"For API Keys",id:"for-api-keys",level:3},{value:"For JWT Tokens",id:"for-jwt-tokens",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Python",id:"python",level:3},{value:"JavaScript / Node.js",id:"javascript--nodejs",level:3},{value:"PHP",id:"php",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,r.jsx)(n.p,{children:"The API supports two authentication methods: API Keys and JWT tokens."}),"\n",(0,r.jsx)(n.h2,{id:"api-keys",children:"API Keys"}),"\n",(0,r.jsx)(n.p,{children:"API keys are the recommended method for server-to-server integrations."}),"\n",(0,r.jsx)(n.h3,{id:"obtaining-an-api-key",children:"Obtaining an API Key"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Log in to Sealmetrics dashboard"}),"\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"API Keys"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Generate New Key"})]}),"\n",(0,r.jsx)(n.li,{children:"Copy the key immediately (it won't be shown again)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"using-api-keys",children:"Using API Keys"}),"\n",(0,r.jsxs)(n.p,{children:["Include the key in the ",(0,r.jsx)(n.code,{children:"X-API-Key"})," header:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.sealmetrics.com/api/v1/sites/YOUR_SITE_ID/stats" \\\n  -H "X-API-Key: str_your_api_key_here"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"api-key-format",children:"API Key Format"}),"\n",(0,r.jsx)(n.p,{children:"Keys are prefixed by plan tier:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Prefix"}),(0,r.jsx)(n.th,{children:"Plan"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"str_"})}),(0,r.jsx)(n.td,{children:"Starter"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"str_abc123def456..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gro_"})}),(0,r.jsx)(n.td,{children:"Growth"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gro_abc123def456..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bus_"})}),(0,r.jsx)(n.td,{children:"Business"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bus_abc123def456..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scl_"})}),(0,r.jsx)(n.td,{children:"Scale"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scl_abc123def456..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ent_"})}),(0,r.jsx)(n.td,{children:"Enterprise"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ent_abc123def456..."})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"api-key-security",children:"API Key Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keys are hashed before storage (we cannot retrieve your key)"}),"\n",(0,r.jsx)(n.li,{children:"Keys can be revoked at any time from the dashboard"}),"\n",(0,r.jsx)(n.li,{children:"Set expiration dates for temporary access"}),"\n",(0,r.jsx)(n.li,{children:"Each key is scoped to specific sites"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"jwt-bearer-tokens",children:"JWT Bearer Tokens"}),"\n",(0,r.jsx)(n.p,{children:"JWT tokens are used for user-authenticated sessions (dashboard, mobile apps)."}),"\n",(0,r.jsx)(n.h3,{id:"obtaining-a-token",children:"Obtaining a Token"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.sealmetrics.com/api/v1/auth/token" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "email": "user@example.com",\n    "password": "your_password"\n  }\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"Response:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "eyJhbGciOiJIUzI1NiIs...",\n  "token_type": "bearer",\n  "expires_in": 3600,\n  "refresh_token": "eyJhbGciOiJIUzI1NiIs..."\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"using-jwt-tokens",children:"Using JWT Tokens"}),"\n",(0,r.jsxs)(n.p,{children:["Include the token in the ",(0,r.jsx)(n.code,{children:"Authorization"})," header:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.sealmetrics.com/api/v1/sites/YOUR_SITE_ID/stats" \\\n  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIs..."\n'})}),"\n",(0,r.jsx)(n.h3,{id:"token-refresh",children:"Token Refresh"}),"\n",(0,r.jsx)(n.p,{children:"Access tokens expire after 1 hour. Use the refresh token to obtain a new access token:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.sealmetrics.com/api/v1/auth/refresh" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "refresh_token": "eyJhbGciOiJIUzI1NiIs..."\n  }\'\n'})}),"\n",(0,r.jsx)(n.h3,{id:"jwt-claims",children:"JWT Claims"}),"\n",(0,r.jsx)(n.p,{children:"The access token contains:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Claim"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sub"})}),(0,r.jsx)(n.td,{children:"User ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"email"})}),(0,r.jsx)(n.td,{children:"User email"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"account_ids"})}),(0,r.jsx)(n.td,{children:"List of accessible site IDs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"exp"})}),(0,r.jsx)(n.td,{children:"Expiration timestamp"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"iat"})}),(0,r.jsx)(n.td,{children:"Issued at timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"authentication-errors",children:"Authentication Errors"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"HTTP Code"}),(0,r.jsx)(n.th,{children:"Error Code"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"401"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"missing_credentials"})}),(0,r.jsx)(n.td,{children:"No API key or token provided"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"401"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"invalid_api_key"})}),(0,r.jsx)(n.td,{children:"API key not found or revoked"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"401"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"invalid_token"})}),(0,r.jsx)(n.td,{children:"JWT token is malformed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"401"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"token_expired"})}),(0,r.jsx)(n.td,{children:"JWT token has expired"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"403"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"insufficient_scope"})}),(0,r.jsx)(n.td,{children:"Valid auth but no access to this resource"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Example error response:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": {\n    "code": "invalid_api_key",\n    "message": "The provided API key is invalid or has been revoked"\n  },\n  "request_id": "req_abc123"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"for-api-keys",children:"For API Keys"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Never commit keys to git"})," - Use environment variables"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rotate keys periodically"})," - Generate new keys and revoke old ones"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use separate keys per environment"})," - Different keys for dev, staging, production"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set minimum required scope"})," - Only grant access to needed sites"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"for-jwt-tokens",children:"For JWT Tokens"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Store tokens securely"})," - Use httpOnly cookies or secure storage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement token refresh"})," - Don't wait for expiration errors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle 401 gracefully"})," - Redirect to login or refresh automatically"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clear tokens on logout"})," - Call the logout endpoint"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import requests\n\nAPI_KEY = "str_your_api_key_here"\nBASE_URL = "https://api.sealmetrics.com/api/v1"\n\ndef get_stats(site_id: str, period: str = "7d"):\n    response = requests.get(\n        f"{BASE_URL}/sites/{site_id}/stats",\n        headers={"X-API-Key": API_KEY},\n        params={"period": period}\n    )\n    response.raise_for_status()\n    return response.json()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"javascript--nodejs",children:"JavaScript / Node.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const API_KEY = 'str_your_api_key_here';\nconst BASE_URL = 'https://api.sealmetrics.com/api/v1';\n\nasync function getStats(siteId, period = '7d') {\n  const response = await fetch(\n    `${BASE_URL}/sites/${siteId}/stats?period=${period}`,\n    {\n      headers: { 'X-API-Key': API_KEY }\n    }\n  );\n\n  if (!response.ok) {\n    throw new Error(`API error: ${response.status}`);\n  }\n\n  return response.json();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"php",children:"PHP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"<?php\n$apiKey = 'str_your_api_key_here';\n$baseUrl = 'https://api.sealmetrics.com/api/v1';\n\nfunction getStats($siteId, $period = '7d') {\n    global $apiKey, $baseUrl;\n\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, \"$baseUrl/sites/$siteId/stats?period=$period\");\n    curl_setopt($ch, CURLOPT_HTTPHEADER, [\"X-API-Key: $apiKey\"]);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n\n    $response = curl_exec($ch);\n    curl_close($ch);\n\n    return json_decode($response, true);\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);