"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5260],{28453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>a});var s=n(96540);const i={},t=s.createContext(i);function o(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:r},e.children)}},88318:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"implementation/custom-properties/user-properties","title":"User Properties","description":"Properties that persist across sessions for long-term user segmentation.","source":"@site/docs/implementation/custom-properties/user-properties.mdx","sourceDirName":"implementation/custom-properties","slug":"/implementation/custom-properties/user-properties","permalink":"/implementation/custom-properties/user-properties","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"User Properties","description":"Properties that persist across sessions for long-term user segmentation."},"sidebar":"tutorialSidebar","previous":{"title":"Event Properties","permalink":"/implementation/custom-properties/event-properties"},"next":{"title":"Dynamic Content Grouping","permalink":"/implementation/custom-properties/content-groups"}}');var i=n(74848),t=n(28453);const o={sidebar_position:3,title:"User Properties",description:"Properties that persist across sessions for long-term user segmentation."},a="User Properties",l={},c=[{value:"How User Properties Work",id:"how-user-properties-work",level:2},{value:"Setting User Properties",id:"setting-user-properties",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"When to Set",id:"when-to-set",level:3},{value:"User Property Examples",id:"user-property-examples",level:2},{value:"SaaS Application",id:"saas-application",level:3},{value:"E-commerce",id:"e-commerce",level:3},{value:"Media/Subscription",id:"mediasubscription",level:3},{value:"Updating User Properties",id:"updating-user-properties",level:2},{value:"Merge Behavior",id:"merge-behavior",level:3},{value:"Removing Properties",id:"removing-properties",level:3},{value:"User Properties vs Event Properties",id:"user-properties-vs-event-properties",level:2},{value:"Decision Guide",id:"decision-guide",level:3},{value:"Reading User Properties",id:"reading-user-properties",level:2},{value:"In JavaScript",id:"in-javascript",level:3},{value:"In Reports",id:"in-reports",level:3},{value:"User Identification",id:"user-identification",level:2},{value:"Anonymous Users",id:"anonymous-users",level:3},{value:"Known Users",id:"known-users",level:3},{value:"User ID Best Practices",id:"user-id-best-practices",level:3},{value:"Privacy Considerations",id:"privacy-considerations",level:2},{value:"What NOT to Store",id:"what-not-to-store",level:3},{value:"GDPR Compliance",id:"gdpr-compliance",level:3},{value:"Server-Side User Properties",id:"server-side-user-properties",level:2},{value:"Backend Advantages",id:"backend-advantages",level:3},{value:"Debugging",id:"debugging",level:2},{value:"Check Current Properties",id:"check-current-properties",level:3},{value:"Verify in Dashboard",id:"verify-in-dashboard",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Properties Not Persisting",id:"properties-not-persisting",level:3},{value:"Properties Missing on Events",id:"properties-missing-on-events",level:3},{value:"Wrong User Getting Properties",id:"wrong-user-getting-properties",level:3}];function p(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"user-properties",children:"User Properties"})}),"\n",(0,i.jsx)(r.p,{children:"User properties persist across all sessions for a user, enabling long-term segmentation and analysis."}),"\n",(0,i.jsx)(r.h2,{id:"how-user-properties-work",children:"How User Properties Work"}),"\n",(0,i.jsx)(r.p,{children:"Unlike event properties (sent once), user properties are stored with the user profile:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"User: user_abc123\n\u251c\u2500\u2500 User Properties (persistent)\n\u2502   \u251c\u2500\u2500 customer_type: premium\n\u2502   \u251c\u2500\u2500 signup_date: 2024-01-15\n\u2502   \u2514\u2500\u2500 company_size: 50-100\n\u2502\n\u2514\u2500\u2500 Events (each includes user properties)\n    \u251c\u2500\u2500 Event 1: { ..., customer_type: premium, ... }\n    \u251c\u2500\u2500 Event 2: { ..., customer_type: premium, ... }\n    \u2514\u2500\u2500 Event 3: { ..., customer_type: premium, ... }\n"})}),"\n",(0,i.jsx)(r.h2,{id:"setting-user-properties",children:"Setting User Properties"}),"\n",(0,i.jsx)(r.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"_sm('set', 'userProperties', {\n  customer_type: 'premium',\n  signup_date: '2024-01-15',\n  account_id: 'ACC-789'\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"when-to-set",children:"When to Set"}),"\n",(0,i.jsx)(r.p,{children:"Set user properties when you learn something about the user:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// After signup\n_sm('set', 'userProperties', {\n  signup_date: new Date().toISOString().split('T')[0],\n  signup_source: 'organic',\n  plan_type: 'free'\n});\n\n// After upgrading\n_sm('set', 'userProperties', {\n  plan_type: 'pro',\n  upgrade_date: new Date().toISOString().split('T')[0]\n});\n\n// After profile completion\n_sm('set', 'userProperties', {\n  industry: 'technology',\n  company_size: '50-100',\n  job_role: 'marketing'\n});\n"})}),"\n",(0,i.jsx)(r.h2,{id:"user-property-examples",children:"User Property Examples"}),"\n",(0,i.jsx)(r.h3,{id:"saas-application",children:"SaaS Application"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"_sm('set', 'userProperties', {\n  // Account info\n  plan_type: 'pro',\n  billing_cycle: 'annual',\n  account_age_days: '365',\n\n  // Company info\n  company_size: '50-100',\n  industry: 'technology',\n  country: 'US',\n\n  // User info\n  role: 'admin',\n  department: 'marketing',\n\n  // Engagement\n  activation_status: 'complete',\n  feature_tier: 'power_user',\n  nps_score: '9'\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"e-commerce",children:"E-commerce"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"_sm('set', 'userProperties', {\n  // Customer status\n  customer_type: 'returning',\n  loyalty_tier: 'gold',\n  lifetime_value_bucket: 'high',\n\n  // Purchase history\n  first_purchase_date: '2023-06-15',\n  total_orders: '12',\n  preferred_category: 'electronics',\n\n  // Preferences\n  newsletter_subscriber: 'true',\n  preferred_payment: 'paypal',\n  preferred_shipping: 'express'\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"mediasubscription",children:"Media/Subscription"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"_sm('set', 'userProperties', {\n  // Subscription\n  subscription_type: 'premium',\n  subscription_start: '2024-01-01',\n  trial_user: 'false',\n\n  // Engagement\n  articles_read_bucket: '50-100',\n  preferred_topics: 'technology,science',\n  device_preference: 'mobile',\n\n  // Newsletter\n  newsletter_frequency: 'daily',\n  notification_enabled: 'true'\n});\n"})}),"\n",(0,i.jsx)(r.h2,{id:"updating-user-properties",children:"Updating User Properties"}),"\n",(0,i.jsx)(r.p,{children:"User properties can be updated at any time:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Initial state\n_sm('set', 'userProperties', {\n  plan_type: 'free',\n  feature_count: '3'\n});\n\n// Later: user upgrades\n_sm('set', 'userProperties', {\n  plan_type: 'pro',        // Updated\n  upgrade_date: '2024-01-20' // New property\n  // feature_count remains '3' (not overwritten)\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"merge-behavior",children:"Merge Behavior"}),"\n",(0,i.jsx)(r.p,{children:"New properties are merged with existing:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Before: { a: '1', b: '2' }\n_sm('set', 'userProperties', { b: '3', c: '4' });\n// After: { a: '1', b: '3', c: '4' }\n"})}),"\n",(0,i.jsx)(r.h3,{id:"removing-properties",children:"Removing Properties"}),"\n",(0,i.jsx)(r.p,{children:"Set to empty string to effectively remove:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"_sm('set', 'userProperties', {\n  old_property: ''  // Will be filtered out in reports\n});\n"})}),"\n",(0,i.jsx)(r.h2,{id:"user-properties-vs-event-properties",children:"User Properties vs Event Properties"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Aspect"}),(0,i.jsx)(r.th,{children:"User Properties"}),(0,i.jsx)(r.th,{children:"Event Properties"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Persistence"}),(0,i.jsx)(r.td,{children:"Across all sessions"}),(0,i.jsx)(r.td,{children:"Single event only"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"When to use"}),(0,i.jsx)(r.td,{children:"User attributes"}),(0,i.jsx)(r.td,{children:"Event-specific data"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Set frequency"}),(0,i.jsx)(r.td,{children:"Once or when changing"}),(0,i.jsx)(r.td,{children:"Every event"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Example"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"customer_type: 'premium'"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"product_id: 'SKU-123'"})})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"decision-guide",children:"Decision Guide"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Use User Properties for:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Account type or plan"}),"\n",(0,i.jsx)(r.li,{children:"Customer segment"}),"\n",(0,i.jsx)(r.li,{children:"Signup date"}),"\n",(0,i.jsx)(r.li,{children:"Lifetime metrics"}),"\n",(0,i.jsx)(r.li,{children:"Preferences"}),"\n",(0,i.jsx)(r.li,{children:"Demographics"}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Use Event Properties for:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Product information"}),"\n",(0,i.jsx)(r.li,{children:"Transaction details"}),"\n",(0,i.jsx)(r.li,{children:"Page-specific data"}),"\n",(0,i.jsx)(r.li,{children:"Action context"}),"\n",(0,i.jsx)(r.li,{children:"Temporary states"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"reading-user-properties",children:"Reading User Properties"}),"\n",(0,i.jsx)(r.h3,{id:"in-javascript",children:"In JavaScript"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Get current user properties\nconst userProps = _sm('get', 'userProperties');\nconsole.log(userProps.customer_type); // 'premium'\n"})}),"\n",(0,i.jsx)(r.h3,{id:"in-reports",children:"In Reports"}),"\n",(0,i.jsx)(r.p,{children:"User properties appear as dimensions:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"Conversions by Customer Type\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\ncustomer_type    Conversions    Revenue      AOV\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\npremium               234      \u20ac46,800    \u20ac200\nstandard              567      \u20ac56,700    \u20ac100\nfree                   89       \u20ac4,450     \u20ac50\n"})}),"\n",(0,i.jsx)(r.h2,{id:"user-identification",children:"User Identification"}),"\n",(0,i.jsx)(r.h3,{id:"anonymous-users",children:"Anonymous Users"}),"\n",(0,i.jsx)(r.p,{children:"By default, users are identified by a first-party ID:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Automatic - no action needed\n// User identified by _sm_uid cookie/storage\n"})}),"\n",(0,i.jsx)(r.h3,{id:"known-users",children:"Known Users"}),"\n",(0,i.jsx)(r.p,{children:"When you know who the user is:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Set a custom user ID (e.g., after login)\n_sm('identify', 'user-12345');\n\n// Then set properties\n_sm('set', 'userProperties', {\n  email_domain: 'company.com',\n  user_role: 'admin'\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"user-id-best-practices",children:"User ID Best Practices"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Good: stable, internal IDs\n_sm('identify', 'usr_abc123');\n_sm('identify', '12345');\n\n// Avoid: PII or changeable values\n_sm('identify', 'john@example.com');  // PII concern\n_sm('identify', 'JohnSmith');         // Could change\n"})}),"\n",(0,i.jsx)(r.h2,{id:"privacy-considerations",children:"Privacy Considerations"}),"\n",(0,i.jsx)(r.h3,{id:"what-not-to-store",children:"What NOT to Store"}),"\n",(0,i.jsx)(r.p,{children:"Never store PII in user properties:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// \u274c Don't do this\n_sm('set', 'userProperties', {\n  email: 'john@example.com',\n  phone: '+1234567890',\n  full_name: 'John Smith',\n  address: '123 Main St'\n});\n\n// \u2705 Do this instead\n_sm('set', 'userProperties', {\n  email_domain: 'example.com',  // Domain only\n  country: 'US',                // General location\n  customer_type: 'enterprise'   // Non-identifying\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"gdpr-compliance",children:"GDPR Compliance"}),"\n",(0,i.jsx)(r.p,{children:"User properties are subject to:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Right to erasure (deletion requests)"}),"\n",(0,i.jsx)(r.li,{children:"Data portability (export requests)"}),"\n",(0,i.jsx)(r.li,{children:"Right to access (viewing requests)"}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Contact support to process data subject requests."}),"\n",(0,i.jsx)(r.h2,{id:"server-side-user-properties",children:"Server-Side User Properties"}),"\n",(0,i.jsx)(r.p,{children:"Set properties from your backend:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import requests\n\n# Set user properties via API\nrequests.post(\n    "https://app.sealmetrics.com/api/users/properties",\n    headers={"Authorization": f"Bearer {API_KEY}"},\n    json={\n        "account_id": "acc_123...",\n        "user_id": "user-12345",\n        "properties": {\n            "subscription_status": "active",\n            "mrr": "99",\n            "payment_method": "stripe"\n        }\n    }\n)\n'})}),"\n",(0,i.jsx)(r.h3,{id:"backend-advantages",children:"Backend Advantages"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Access to billing/CRM data"}),"\n",(0,i.jsx)(r.li,{children:"More accurate values"}),"\n",(0,i.jsx)(r.li,{children:"Not dependent on JavaScript"}),"\n",(0,i.jsx)(r.li,{children:"Can set historical data"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"debugging",children:"Debugging"}),"\n",(0,i.jsx)(r.h3,{id:"check-current-properties",children:"Check Current Properties"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"_sm('debug', true);\n\n// View current user properties\nconsole.log(_sm('get', 'userProperties'));\n\n// Output:\n// {\n//   customer_type: 'premium',\n//   signup_date: '2024-01-15',\n//   ...\n// }\n"})}),"\n",(0,i.jsx)(r.h3,{id:"verify-in-dashboard",children:"Verify in Dashboard"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["Go to ",(0,i.jsx)(r.strong,{children:"Reports"})," \u2192 any report"]}),"\n",(0,i.jsx)(r.li,{children:"Add dimension: your user property"}),"\n",(0,i.jsx)(r.li,{children:"Verify values appear correctly"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(r.h3,{id:"properties-not-persisting",children:"Properties Not Persisting"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Check cookies/storage not blocked"}),"\n",(0,i.jsx)(r.li,{children:"Verify same domain across pages"}),"\n",(0,i.jsx)(r.li,{children:"Check for privacy mode/incognito"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"properties-missing-on-events",children:"Properties Missing on Events"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["Ensure ",(0,i.jsx)(r.code,{children:"set"})," called before events"]}),"\n",(0,i.jsx)(r.li,{children:"Check for JavaScript errors"}),"\n",(0,i.jsx)(r.li,{children:"Verify property names are valid"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"wrong-user-getting-properties",children:"Wrong User Getting Properties"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["Check ",(0,i.jsx)(r.code,{children:"identify"})," calls are correct"]}),"\n",(0,i.jsx)(r.li,{children:"Verify user ID matches expected"}),"\n",(0,i.jsx)(r.li,{children:"Check for shared browser scenarios"}),"\n"]})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);