"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3805],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(96540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},82482:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"implementation/tracker/spa-support","title":"SPA Support","description":"The tracker automatically detects navigation in Single Page Applications. No configuration required.","source":"@site/docs/implementation/tracker/spa-support.mdx","sourceDirName":"implementation/tracker","slug":"/implementation/tracker/spa-support","permalink":"/implementation/tracker/spa-support","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"SPA Support"},"sidebar":"tutorialSidebar","previous":{"title":"Setting Up Tracking in Sealmetrics","permalink":"/implementation/tracker/setup"},"next":{"title":"Tracker API Reference","permalink":"/implementation/tracker/api-reference"}}');var i=t(74848),s=t(28453);const a={sidebar_position:5,title:"SPA Support"},o="Single Page Application (SPA) Support",c={},l=[{value:"How It Works",id:"how-it-works",level:2},{value:"Supported Frameworks",id:"supported-frameworks",level:2},{value:"Installation",id:"installation",level:2},{value:"React Example",id:"react-example",level:2},{value:"With react-router",id:"with-react-router",level:3},{value:"Tracking Conversions",id:"tracking-conversions",level:3},{value:"With Content Grouping",id:"with-content-grouping",level:3},{value:"Next.js Example",id:"nextjs-example",level:2},{value:"App Router (Next.js 13+)",id:"app-router-nextjs-13",level:3},{value:"Pages Router",id:"pages-router",level:3},{value:"Dynamic Content Grouping",id:"dynamic-content-grouping",level:3},{value:"Vue Example",id:"vue-example",level:2},{value:"With vue-router",id:"with-vue-router",level:3},{value:"Tracking Events in Components",id:"tracking-events-in-components",level:3},{value:"Angular Example",id:"angular-example",level:2},{value:"Module Setup",id:"module-setup",level:3},{value:"Tracking Service",id:"tracking-service",level:3},{value:"Nuxt.js Example",id:"nuxtjs-example",level:2},{value:"Nuxt 3",id:"nuxt-3",level:3},{value:"Composable for Tracking",id:"composable-for-tracking",level:3},{value:"TypeScript Declarations",id:"typescript-declarations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Duplicate Pageviews",id:"duplicate-pageviews",level:3},{value:"Missing Pageviews on Route Change",id:"missing-pageviews-on-route-change",level:3},{value:"Hash-Based Routing",id:"hash-based-routing",level:3},{value:"Server-Side Rendering (SSR)",id:"server-side-rendering-ssr",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"single-page-application-spa-support",children:"Single Page Application (SPA) Support"})}),"\n",(0,i.jsx)(n.p,{children:"The tracker automatically detects navigation in Single Page Applications. No configuration required."}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsx)(n.p,{children:"The tracker intercepts:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"history.pushState()"})," - Triggered when navigating to a new URL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"history.replaceState()"})," - Triggered when replacing current URL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"popstate"})," event - Triggered when user clicks back/forward"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each URL change triggers a new pageview event automatically."}),"\n",(0,i.jsx)(n.h2,{id:"supported-frameworks",children:"Supported Frameworks"}),"\n",(0,i.jsx)(n.p,{children:"Works out of the box with:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Framework"}),(0,i.jsx)(n.th,{children:"Router"}),(0,i.jsx)(n.th,{children:"Tested"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"React"}),(0,i.jsx)(n.td,{children:"react-router v5/v6"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Vue"}),(0,i.jsx)(n.td,{children:"vue-router v3/v4"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Angular"}),(0,i.jsx)(n.td,{children:"@angular/router"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Next.js"}),(0,i.jsx)(n.td,{children:"App Router, Pages Router"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Nuxt.js"}),(0,i.jsx)(n.td,{children:"nuxt/router"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Svelte"}),(0,i.jsx)(n.td,{children:"svelte-routing, SvelteKit"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Remix"}),(0,i.jsx)(n.td,{children:"@remix-run/react"}),(0,i.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Any router that uses the History API is automatically supported."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.p,{children:"Same as regular installation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<script src="https://t.sealmetrics.com/t.js?id=YOUR_ACCOUNT_ID" defer><\/script>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"react-example",children:"React Example"}),"\n",(0,i.jsx)(n.h3,{id:"with-react-router",children:"With react-router"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:'// App.jsx\nimport { BrowserRouter, Routes, Route } from \'react-router-dom\';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path="/" element={<Home />} />\n        <Route path="/products" element={<Products />} />\n        <Route path="/products/:id" element={<ProductDetail />} />\n        <Route path="/checkout" element={<Checkout />} />\n      </Routes>\n    </BrowserRouter>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"No additional setup needed. Navigation between routes is tracked automatically."}),"\n",(0,i.jsx)(n.h3,{id:"tracking-conversions",children:"Tracking Conversions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"// CheckoutSuccess.jsx\nimport { useEffect } from 'react';\n\nfunction CheckoutSuccess({ order }) {\n  useEffect(() => {\n    // Pageview is automatic, just track conversion\n    if (typeof sealmetrics !== 'undefined') {\n      sealmetrics.conv('purchase', order.total, {\n        order_id: order.id,\n        currency: order.currency\n      });\n    }\n  }, [order]);\n\n  return <div>Thank you for your order!</div>;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"with-content-grouping",children:"With Content Grouping"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"// Use the group parameter in the script tag per page type,\n// or set it dynamically:\n\nfunction ProductPage({ product }) {\n  useEffect(() => {\n    if (typeof sealmetrics !== 'undefined') {\n      sealmetrics({ group: 'product' });\n    }\n  }, [product.id]);\n\n  return <div>{product.name}</div>;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"nextjs-example",children:"Next.js Example"}),"\n",(0,i.jsx)(n.h3,{id:"app-router-nextjs-13",children:"App Router (Next.js 13+)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'// app/layout.tsx\nimport Script from \'next/script\';\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <head>\n        <Script\n          src="https://t.sealmetrics.com/t.js?id=YOUR_ACCOUNT_ID"\n          strategy="afterInteractive"\n        />\n      </head>\n      <body>{children}</body>\n    </html>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pages-router",children:"Pages Router"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'// pages/_app.tsx\nimport Script from \'next/script\';\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <>\n      <Script\n        src="https://t.sealmetrics.com/t.js?id=YOUR_ACCOUNT_ID"\n        strategy="afterInteractive"\n      />\n      <Component {...pageProps} />\n    </>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"dynamic-content-grouping",children:"Dynamic Content Grouping"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// app/blog/[slug]/page.tsx\n'use client';\n\nimport { useEffect } from 'react';\n\nexport default function BlogPost({ params }) {\n  useEffect(() => {\n    if (typeof window !== 'undefined' && typeof sealmetrics !== 'undefined') {\n      sealmetrics({ group: 'blog' });\n    }\n  }, [params.slug]);\n\n  return <article>...</article>;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"vue-example",children:"Vue Example"}),"\n",(0,i.jsx)(n.h3,{id:"with-vue-router",children:"With vue-router"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// main.js\nimport { createApp } from 'vue';\nimport { createRouter, createWebHistory } from 'vue-router';\nimport App from './App.vue';\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes: [\n    { path: '/', component: Home },\n    { path: '/products', component: Products },\n    { path: '/products/:id', component: ProductDetail }\n  ]\n});\n\ncreateApp(App).use(router).mount('#app');\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tracking-events-in-components",children:"Tracking Events in Components"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-vue",children:"\x3c!-- ProductDetail.vue --\x3e\n<template>\n  <div>\n    <h1>{{ product.name }}</h1>\n    <button @click=\"addToCart\">Add to Cart</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  methods: {\n    addToCart() {\n      if (typeof sealmetrics !== 'undefined') {\n        sealmetrics.micro('add_to_cart', {\n          product_id: this.product.id,\n          product_name: this.product.name\n        });\n      }\n      // ... add to cart logic\n    }\n  }\n};\n<\/script>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"angular-example",children:"Angular Example"}),"\n",(0,i.jsx)(n.h3,{id:"module-setup",children:"Module Setup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// app.module.ts\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: HomeComponent },\n  { path: 'products', component: ProductsComponent },\n  { path: 'products/:id', component: ProductDetailComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tracking-service",children:"Tracking Service"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// analytics.service.ts\nimport { Injectable } from '@angular/core';\n\ndeclare global {\n  interface Window {\n    sealmetrics: any;\n  }\n}\n\n@Injectable({ providedIn: 'root' })\nexport class AnalyticsService {\n  trackConversion(type: string, amount: number, properties?: object) {\n    if (typeof window.sealmetrics !== 'undefined') {\n      window.sealmetrics.conv(type, amount, properties);\n    }\n  }\n\n  trackMicro(type: string, properties?: object) {\n    if (typeof window.sealmetrics !== 'undefined') {\n      window.sealmetrics.micro(type, properties);\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"nuxtjs-example",children:"Nuxt.js Example"}),"\n",(0,i.jsx)(n.h3,{id:"nuxt-3",children:"Nuxt 3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// nuxt.config.ts\nexport default defineNuxtConfig({\n  app: {\n    head: {\n      script: [\n        {\n          src: 'https://t.sealmetrics.com/t.js?id=YOUR_ACCOUNT_ID',\n          defer: true\n        }\n      ]\n    }\n  }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"composable-for-tracking",children:"Composable for Tracking"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// composables/useAnalytics.ts\nexport function useAnalytics() {\n  const trackConversion = (type: string, amount: number, props?: object) => {\n    if (process.client && typeof sealmetrics !== 'undefined') {\n      sealmetrics.conv(type, amount, props);\n    }\n  };\n\n  const trackMicro = (type: string, props?: object) => {\n    if (process.client && typeof sealmetrics !== 'undefined') {\n      sealmetrics.micro(type, props);\n    }\n  };\n\n  return { trackConversion, trackMicro };\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"typescript-declarations",children:"TypeScript Declarations"}),"\n",(0,i.jsx)(n.p,{children:"Add type declarations for better IDE support:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// types/sealmetrics.d.ts\ninterface SealmetricsOptions {\n  group?: string;\n}\n\ninterface SealmetricsFunction {\n  (options?: SealmetricsOptions): void;\n  conv(type: string, amount: number, properties?: Record<string, string>): void;\n  micro(type: string, properties?: Record<string, string>): void;\n}\n\ndeclare global {\n  const sealmetrics: SealmetricsFunction;\n  const sm: SealmetricsFunction;\n  const _sm: SealmetricsFunction;\n}\n\nexport {};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"duplicate-pageviews",children:"Duplicate Pageviews"}),"\n",(0,i.jsx)(n.p,{children:"If you see duplicate pageviews, check:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Script is not included multiple times"}),"\n",(0,i.jsxs)(n.li,{children:["Not calling ",(0,i.jsx)(n.code,{children:"sealmetrics()"})," manually when automatic tracking is sufficient"]}),"\n",(0,i.jsx)(n.li,{children:"No other analytics wrapper is re-triggering events"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"missing-pageviews-on-route-change",children:"Missing Pageviews on Route Change"}),"\n",(0,i.jsxs)(n.p,{children:["The tracker uses the History API. If your framework uses a custom navigation method that bypasses ",(0,i.jsx)(n.code,{children:"pushState"}),"/",(0,i.jsx)(n.code,{children:"replaceState"}),", pageviews won't be tracked."]}),"\n",(0,i.jsxs)(n.p,{children:["Solution: Call ",(0,i.jsx)(n.code,{children:"sealmetrics()"})," manually after navigation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"router.afterEach(() => {\n  if (typeof sealmetrics !== 'undefined') {\n    sealmetrics();\n  }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"hash-based-routing",children:"Hash-Based Routing"}),"\n",(0,i.jsxs)(n.p,{children:["If your SPA uses hash-based routing (",(0,i.jsx)(n.code,{children:"/#/path"}),"), the tracker will not automatically detect changes."]}),"\n",(0,i.jsxs)(n.p,{children:["Solution: Listen for ",(0,i.jsx)(n.code,{children:"hashchange"})," and track manually:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"window.addEventListener('hashchange', function() {\n  if (typeof sealmetrics !== 'undefined') {\n    sealmetrics();\n  }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"server-side-rendering-ssr",children:"Server-Side Rendering (SSR)"}),"\n",(0,i.jsxs)(n.p,{children:["Always check if ",(0,i.jsx)(n.code,{children:"sealmetrics"})," exists before calling it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"if (typeof sealmetrics !== 'undefined') {\n  sealmetrics.conv('purchase', 99.99);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or for Next.js/Nuxt:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"if (typeof window !== 'undefined' && typeof sealmetrics !== 'undefined') {\n  sealmetrics.conv('purchase', 99.99);\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);