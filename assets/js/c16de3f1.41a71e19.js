"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9110],{28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var r=s(96540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}},94354:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"api/comparison","title":"Period Comparison","description":"Compare analytics data between time periods to track growth, identify trends, and measure performance changes.","source":"@site/docs/api/comparison.mdx","sourceDirName":"api","slug":"/api/comparison","permalink":"/api/comparison","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Period Comparison"},"sidebar":"tutorialSidebar","previous":{"title":"Pagination & Filtering","permalink":"/api/pagination-sorting"},"next":{"title":"Segments","permalink":"/api/segments"}}');var i=s(74848),t=s(28453);const d={sidebar_position:10,title:"Period Comparison"},a="Period Comparison API",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Using Comparison",id:"using-comparison",level:2},{value:"Parameter Values",id:"parameter-values",level:3},{value:"Comparison Modes Explained",id:"comparison-modes-explained",level:2},{value:"Previous Period",id:"previous-period",level:3},{value:"Year over Year (YoY)",id:"year-over-year-yoy",level:3},{value:"Response Format",id:"response-format",level:2},{value:"Overview Endpoint",id:"overview-endpoint",level:3},{value:"List Endpoints",id:"list-endpoints",level:3},{value:"Calculating Deltas",id:"calculating-deltas",level:2},{value:"Delta Interpretation",id:"delta-interpretation",level:3},{value:"Metric Polarity",id:"metric-polarity",level:3},{value:"Endpoints Supporting Comparison",id:"endpoints-supporting-comparison",level:2},{value:"Date Period + Comparison",id:"date-period--comparison",level:2},{value:"With Period Shortcuts",id:"with-period-shortcuts",level:3},{value:"With Custom Dates",id:"with-custom-dates",level:3},{value:"Edge Cases",id:"edge-cases",level:2},{value:"Leap Years",id:"leap-years",level:3},{value:"New Accounts",id:"new-accounts",level:3},{value:"Missing Data Days",id:"missing-data-days",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Python - Calculate All Deltas",id:"python---calculate-all-deltas",level:3},{value:"JavaScript - Display Comparison Card",id:"javascript---display-comparison-card",level:3},{value:"Build Trend Analysis",id:"build-trend-analysis",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Choosing Comparison Mode",id:"choosing-comparison-mode",level:3},{value:"Handling Zero Baselines",id:"handling-zero-baselines",level:3},{value:"Caching Comparison Data",id:"caching-comparison-data",level:3}];function l(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"period-comparison-api",children:"Period Comparison API"})}),"\n",(0,i.jsx)(n.p,{children:"Compare analytics data between time periods to track growth, identify trends, and measure performance changes."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The Sealmetrics API supports two comparison modes:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Mode"}),(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Previous Period"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"previous"})}),(0,i.jsx)(n.td,{children:"Same duration, immediately before the selected range"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Year over Year"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"yoy"})}),(0,i.jsx)(n.td,{children:"Same dates in the previous year"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"using-comparison",children:"Using Comparison"}),"\n",(0,i.jsxs)(n.p,{children:["Add the ",(0,i.jsx)(n.code,{children:"compare"})," parameter to any stats endpoint:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /stats/overview?site_id=my-site&period=30d&compare=previous\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameter-values",children:"Parameter Values"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Effect"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"previous"})}),(0,i.jsx)(n.td,{children:"Compare with the previous period of same duration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"yoy"})}),(0,i.jsx)(n.td,{children:"Compare with the same period last year"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"(omit)"})}),(0,i.jsx)(n.td,{children:"No comparison (default for most endpoints)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsxs)(n.td,{children:["Alias for ",(0,i.jsx)(n.code,{children:"previous"})]})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"/stats/overview"})," endpoint defaults to ",(0,i.jsx)(n.code,{children:"compare=previous"})," if not specified."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"comparison-modes-explained",children:"Comparison Modes Explained"}),"\n",(0,i.jsx)(n.h3,{id:"previous-period",children:"Previous Period"}),"\n",(0,i.jsx)(n.p,{children:"Compares with the same duration immediately before the selected range."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Selected Period"}),(0,i.jsx)(n.th,{children:"Comparison Period"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Jan 15-21 (7 days)"}),(0,i.jsx)(n.td,{children:"Jan 8-14 (7 days)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Last 30 days"}),(0,i.jsx)(n.td,{children:"Previous 30 days"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"This month (Jan 1-10)"}),(0,i.jsx)(n.td,{children:"Dec 2-11 (same duration)"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /stats/sources?site_id=my-site&period=7d&compare=previous\n"})}),"\n",(0,i.jsx)(n.p,{children:"This compares:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Current"}),": Last 7 days (e.g., Jan 4-10)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Previous"}),": 7 days before that (Dec 28 - Jan 3)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"year-over-year-yoy",children:"Year over Year (YoY)"}),"\n",(0,i.jsx)(n.p,{children:"Compares with the exact same dates in the previous year."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Selected Period"}),(0,i.jsx)(n.th,{children:"Comparison Period"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Jan 1-31, 2025"}),(0,i.jsx)(n.td,{children:"Jan 1-31, 2024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Q4 2024"}),(0,i.jsx)(n.td,{children:"Q4 2023"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Dec 25, 2024"}),(0,i.jsx)(n.td,{children:"Dec 25, 2023"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /stats/sources?site_id=my-site&period=this_month&compare=yoy\n"})}),"\n",(0,i.jsx)(n.p,{children:"This compares:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Current"}),": January 2025"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Previous"}),": January 2024"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"When to use YoY",type:"tip",children:(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"yoy"})," for seasonal businesses where comparing to last year is more meaningful than the previous period. Black Friday vs Black Friday, not Black Friday vs early November."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"response-format",children:"Response Format"}),"\n",(0,i.jsx)(n.h3,{id:"overview-endpoint",children:"Overview Endpoint"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"/stats/overview"})," endpoint includes comparison data inline:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "entrances": 15420,\n    "engaged_entrances": 12336,\n    "page_views": 45780,\n    "conversions": 245,\n    "revenue": 18650.00,\n    "bounce_rate": 20.0,\n    "comparison": {\n      "entrances": 14200,\n      "engaged_entrances": 11360,\n      "page_views": 42500,\n      "conversions": 210,\n      "revenue": 16800.00,\n      "bounce_rate": 20.0\n    },\n    "deltas": {\n      "entrances": 8.59,\n      "engaged_entrances": 8.59,\n      "page_views": 7.72,\n      "conversions": 16.67,\n      "revenue": 11.01,\n      "bounce_rate": 0.0\n    },\n    "time_series": [...],\n    "comparison_time_series": [...]\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"comparison"})}),(0,i.jsx)(n.td,{children:"Raw metrics from the comparison period"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"deltas"})}),(0,i.jsx)(n.td,{children:"Percentage change from comparison to current"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"comparison_time_series"})}),(0,i.jsx)(n.td,{children:"Daily data points for the comparison period"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"list-endpoints",children:"List Endpoints"}),"\n",(0,i.jsx)(n.p,{children:"Paginated list endpoints include comparison totals:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "utm_source": "google",\n      "entrances": 8500,\n      "conversions": 95,\n      "revenue": 7600.00\n    },\n    {\n      "utm_source": "facebook",\n      "entrances": 3200,\n      "conversions": 42,\n      "revenue": 3150.00\n    }\n  ],\n  "total": 25,\n  "page": 1,\n  "page_size": 50,\n  "has_next": false,\n  "has_prev": false,\n  "comparison": {\n    "entrances": 10500,\n    "engaged_entrances": 8400,\n    "page_views": 31500,\n    "conversions": 115,\n    "revenue": 9200.00\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"comparison"})," object contains ",(0,i.jsx)(n.strong,{children:"aggregate totals"})," for the comparison period (not per-row comparisons)."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"calculating-deltas",children:"Calculating Deltas"}),"\n",(0,i.jsx)(n.p,{children:"The API returns comparison data; you calculate deltas client-side:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function calculateDelta(current, previous) {\n  if (previous === 0) return current > 0 ? 100 : 0;\n  return ((current - previous) / previous) * 100;\n}\n\n// Example\nconst currentEntrances = response.data.entrances;\nconst previousEntrances = response.data.comparison.entrances;\nconst delta = calculateDelta(currentEntrances, previousEntrances);\n// Result: 8.59 (8.59% increase)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"delta-interpretation",children:"Delta Interpretation"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Delta"}),(0,i.jsx)(n.th,{children:"Meaning"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"+15.2%"})}),(0,i.jsx)(n.td,{children:"15.2% increase vs comparison period"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-8.5%"})}),(0,i.jsx)(n.td,{children:"8.5% decrease vs comparison period"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"0%"})}),(0,i.jsx)(n.td,{children:"No change"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"N/A"})}),(0,i.jsx)(n.td,{children:"No comparison data available"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"metric-polarity",children:"Metric Polarity"}),"\n",(0,i.jsx)(n.p,{children:'Some metrics are "inverse" - lower is better:'}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Metric"}),(0,i.jsx)(n.th,{children:"Improvement Direction"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Entrances"}),(0,i.jsx)(n.td,{children:"Higher is better"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Conversions"}),(0,i.jsx)(n.td,{children:"Higher is better"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Revenue"}),(0,i.jsx)(n.td,{children:"Higher is better"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Bounce Rate"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Lower is better"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"When displaying deltas, consider inverting colors for bounce rate."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"endpoints-supporting-comparison",children:"Endpoints Supporting Comparison"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Endpoint"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/overview"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"previous"})}),(0,i.jsx)(n.td,{children:"Full comparison with time series"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/pages"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/sources"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/mediums"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/campaigns"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/terms"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/referrers"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/geo/countries"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/conversions"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/microconversions"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/stats/landing-pages"})}),(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Totals only"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"date-period--comparison",children:"Date Period + Comparison"}),"\n",(0,i.jsx)(n.p,{children:"The comparison period is calculated based on the selected date range:"}),"\n",(0,i.jsx)(n.h3,{id:"with-period-shortcuts",children:"With Period Shortcuts"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Period"}),(0,i.jsx)(n.th,{children:"Current Range"}),(0,i.jsx)(n.th,{children:"Previous Comparison"}),(0,i.jsx)(n.th,{children:"YoY Comparison"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"7d"})}),(0,i.jsx)(n.td,{children:"Last 7 days"}),(0,i.jsx)(n.td,{children:"Previous 7 days"}),(0,i.jsx)(n.td,{children:"Same 7 days last year"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"30d"})}),(0,i.jsx)(n.td,{children:"Last 30 days"}),(0,i.jsx)(n.td,{children:"Previous 30 days"}),(0,i.jsx)(n.td,{children:"Same 30 days last year"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"this_month"})}),(0,i.jsx)(n.td,{children:"Month to date"}),(0,i.jsx)(n.td,{children:"Same days in previous month"}),(0,i.jsx)(n.td,{children:"Same days in previous year"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"last_month"})}),(0,i.jsx)(n.td,{children:"Full previous month"}),(0,i.jsx)(n.td,{children:"Month before that"}),(0,i.jsx)(n.td,{children:"Same month last year"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"this_quarter"})}),(0,i.jsx)(n.td,{children:"Quarter to date"}),(0,i.jsx)(n.td,{children:"Same days in previous quarter"}),(0,i.jsx)(n.td,{children:"Same days in previous year"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ytd"})}),(0,i.jsx)(n.td,{children:"Year to date"}),(0,i.jsx)(n.td,{children:"Same days in previous year"}),(0,i.jsx)(n.td,{children:"N/A (same as period)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"with-custom-dates",children:"With Custom Dates"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /stats/overview?site_id=my-site&start_date=2025-01-01&end_date=2025-01-15&compare=previous\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Dates"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Current"})}),(0,i.jsx)(n.td,{children:"Jan 1-15, 2025 (15 days)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Previous"})}),(0,i.jsx)(n.td,{children:"Dec 17-31, 2024 (15 days)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"YoY"})}),(0,i.jsx)(n.td,{children:"Jan 1-15, 2024"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"edge-cases",children:"Edge Cases"}),"\n",(0,i.jsx)(n.h3,{id:"leap-years",children:"Leap Years"}),"\n",(0,i.jsx)(n.p,{children:"For YoY comparison on February 29:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"2024-02-29 (leap year) \u2192 2023-02-28 (non-leap year)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The API automatically adjusts to February 28."}),"\n",(0,i.jsx)(n.h3,{id:"new-accounts",children:"New Accounts"}),"\n",(0,i.jsx)(n.p,{children:"If the comparison period is before the account existed:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "comparison": {\n    "entrances": 0,\n    "conversions": 0,\n    "revenue": 0.00\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"All comparison values will be zero."}),"\n",(0,i.jsx)(n.h3,{id:"missing-data-days",children:"Missing Data Days"}),"\n",(0,i.jsx)(n.p,{children:"If some days in the comparison period have no data, those days contribute zero to totals. This is normal and doesn't indicate an error."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,i.jsx)(n.h3,{id:"python---calculate-all-deltas",children:"Python - Calculate All Deltas"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import requests\n\ndef get_stats_with_comparison(site_id, period="30d", compare="previous"):\n    response = requests.get(\n        "https://api.sealmetrics.com/api/v1/stats/overview",\n        headers={"X-API-Key": API_KEY},\n        params={\n            "site_id": site_id,\n            "period": period,\n            "compare": compare\n        }\n    )\n    return response.json()["data"]\n\ndef calculate_delta(current, previous):\n    if previous == 0:\n        return 100.0 if current > 0 else 0.0\n    return round(((current - previous) / previous) * 100, 2)\n\n# Get data\ndata = get_stats_with_comparison("my-site", "30d", "previous")\ncomparison = data["comparison"]\n\n# Calculate deltas\nmetrics = ["entrances", "conversions", "revenue", "bounce_rate"]\nfor metric in metrics:\n    current = data[metric]\n    previous = comparison[metric]\n    delta = calculate_delta(current, previous)\n\n    # Invert display for bounce_rate (lower is better)\n    if metric == "bounce_rate":\n        direction = "improved" if delta < 0 else "worsened"\n    else:\n        direction = "up" if delta > 0 else "down"\n\n    print(f"{metric}: {current} ({delta:+.1f}% {direction})")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"javascript---display-comparison-card",children:"JavaScript - Display Comparison Card"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"async function fetchWithComparison(accountId, period, compare = 'previous') {\n  const params = new URLSearchParams({\n    site_id: accountId,\n    period,\n    compare\n  });\n\n  const response = await fetch(\n    `https://api.sealmetrics.com/api/v1/stats/overview?${params}`,\n    { headers: { 'X-API-Key': API_KEY } }\n  );\n\n  return response.json();\n}\n\nfunction formatDelta(current, previous, inverse = false) {\n  if (previous === 0) {\n    return current > 0 ? '+\u221e' : '0%';\n  }\n\n  const delta = ((current - previous) / previous) * 100;\n  const formatted = `${delta >= 0 ? '+' : ''}${delta.toFixed(1)}%`;\n\n  // For inverse metrics (bounce_rate), flip the color logic\n  const isPositive = inverse ? delta < 0 : delta > 0;\n\n  return {\n    text: formatted,\n    color: isPositive ? 'green' : delta < 0 ? 'red' : 'gray'\n  };\n}\n\n// Usage\nconst { data } = await fetchWithComparison('my-site', '30d', 'yoy');\n\nconst entrancesDelta = formatDelta(\n  data.entrances,\n  data.comparison.entrances\n);\nconsole.log(`Entrances: ${data.entrances} (${entrancesDelta.text})`);\n\nconst bounceDelta = formatDelta(\n  data.bounce_rate,\n  data.comparison.bounce_rate,\n  true // inverse = true for bounce rate\n);\nconsole.log(`Bounce Rate: ${data.bounce_rate}% (${bounceDelta.text})`);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"build-trend-analysis",children:"Build Trend Analysis"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def analyze_trend(site_id, periods=["7d", "30d", "90d"]):\n    """Analyze trends across multiple time periods."""\n    results = {}\n\n    for period in periods:\n        data = get_stats_with_comparison(site_id, period, "previous")\n\n        results[period] = {\n            "entrances": {\n                "current": data["entrances"],\n                "delta": calculate_delta(\n                    data["entrances"],\n                    data["comparison"]["entrances"]\n                )\n            },\n            "revenue": {\n                "current": data["revenue"],\n                "delta": calculate_delta(\n                    data["revenue"],\n                    data["comparison"]["revenue"]\n                )\n            }\n        }\n\n    return results\n\n# Output\ntrends = analyze_trend("my-site")\nfor period, metrics in trends.items():\n    print(f"\\n{period}:")\n    print(f"  Entrances: {metrics[\'entrances\'][\'current\']} ({metrics[\'entrances\'][\'delta\']:+.1f}%)")\n    print(f"  Revenue: \u20ac{metrics[\'revenue\'][\'current\']} ({metrics[\'revenue\'][\'delta\']:+.1f}%)")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"choosing-comparison-mode",children:"Choosing Comparison Mode"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Scenario"}),(0,i.jsx)(n.th,{children:"Recommended Mode"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Daily monitoring"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"previous"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Weekly review"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"previous"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Monthly reporting"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"yoy"})," (seasonal) or ",(0,i.jsx)(n.code,{children:"previous"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Campaign analysis"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"previous"})," (vs pre-campaign)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Seasonal business"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"yoy"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Growth tracking"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"previous"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"handling-zero-baselines",children:"Handling Zero Baselines"}),"\n",(0,i.jsx)(n.p,{children:"When previous period has zero values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"if (previous === 0) {\n  // Don't show percentage, show absolute change\n  return current > 0 ? `+${current} (new)` : 'No data';\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"caching-comparison-data",children:"Caching Comparison Data"}),"\n",(0,i.jsx)(n.p,{children:"Comparison calculations are more expensive than single-period queries. Consider:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Cache comparison results longer (data won't change)"}),"\n",(0,i.jsx)(n.li,{children:"Fetch comparison data less frequently than real-time data"}),"\n",(0,i.jsx)(n.li,{children:"Pre-calculate and store daily comparison summaries"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);