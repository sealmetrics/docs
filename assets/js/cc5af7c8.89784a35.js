"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1191],{9804:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"platform/settings/integrations/bigquery","title":"BigQuery Integration","description":"Export your Sealmetrics data to Google BigQuery for advanced analysis.","source":"@site/docs/platform/settings/integrations/bigquery.mdx","sourceDirName":"platform/settings/integrations","slug":"/platform/settings/integrations/bigquery","permalink":"/platform/settings/integrations/bigquery","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"BigQuery Integration","description":"Export your Sealmetrics data to Google BigQuery for advanced analysis."},"sidebar":"tutorialSidebar","previous":{"title":"Custom Dimensions","permalink":"/platform/settings/tracking/custom-dimensions"},"next":{"title":"Webhooks","permalink":"/platform/settings/integrations/webhooks"}}');var r=i(74848),t=i(28453);const d={sidebar_position:1,title:"BigQuery Integration",description:"Export your Sealmetrics data to Google BigQuery for advanced analysis."},l="BigQuery Integration",c={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup Overview",id:"setup-overview",level:2},{value:"Step 1: Create GCP Service Account",id:"step-1-create-gcp-service-account",level:2},{value:"In Google Cloud Console",id:"in-google-cloud-console",level:3},{value:"Step 2: Grant Permissions",id:"step-2-grant-permissions",level:2},{value:"Step 3: Generate Credentials",id:"step-3-generate-credentials",level:2},{value:"Step 4: Configure in Sealmetrics",id:"step-4-configure-in-sealmetrics",level:2},{value:"Step 5: Configure Sync Settings",id:"step-5-configure-sync-settings",level:2},{value:"Dataset Settings",id:"dataset-settings",level:3},{value:"Sync Schedule",id:"sync-schedule",level:3},{value:"Data Options",id:"data-options",level:3},{value:"Step 6: Activate and Verify",id:"step-6-activate-and-verify",level:2},{value:"BigQuery Schema",id:"bigquery-schema",level:2},{value:"Pageviews Table (<code>sm_pageviews</code>)",id:"pageviews-table-sm_pageviews",level:3},{value:"Conversions Table (<code>sm_conversions</code>)",id:"conversions-table-sm_conversions",level:3},{value:"Example Queries",id:"example-queries",level:2},{value:"Daily Traffic Summary",id:"daily-traffic-summary",level:3},{value:"Conversion Attribution",id:"conversion-attribution",level:3},{value:"Traffic by Content Group",id:"traffic-by-content-group",level:3},{value:"Custom Dimension Analysis",id:"custom-dimension-analysis",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Permission Denied&quot; Error",id:"permission-denied-error",level:3},{value:"Sync Not Running",id:"sync-not-running",level:3},{value:"Missing Data",id:"missing-data",level:3},{value:"High Costs",id:"high-costs",level:3},{value:"Data Retention",id:"data-retention",level:2},{value:"Costs",id:"costs",level:2},{value:"Sealmetrics",id:"sealmetrics",level:3},{value:"Google Cloud",id:"google-cloud",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"bigquery-integration",children:"BigQuery Integration"})}),"\n",(0,r.jsx)(n.p,{children:"Export your Sealmetrics data to Google BigQuery for custom SQL analysis, machine learning, and integration with your data warehouse."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sealmetrics Growth plan or above"}),"\n",(0,r.jsx)(n.li,{children:"Google Cloud Platform (GCP) account"}),"\n",(0,r.jsx)(n.li,{children:"BigQuery API enabled in GCP"}),"\n",(0,r.jsx)(n.li,{children:"GCP service account with BigQuery permissions"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"setup-overview",children:"Setup Overview"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a GCP service account"}),"\n",(0,r.jsx)(n.li,{children:"Grant BigQuery permissions"}),"\n",(0,r.jsx)(n.li,{children:"Generate and download credentials"}),"\n",(0,r.jsx)(n.li,{children:"Configure in Sealmetrics"}),"\n",(0,r.jsx)(n.li,{children:"Choose sync settings"}),"\n",(0,r.jsx)(n.li,{children:"Verify data export"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-1-create-gcp-service-account",children:"Step 1: Create GCP Service Account"}),"\n",(0,r.jsx)(n.h3,{id:"in-google-cloud-console",children:"In Google Cloud Console"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.a,{href:"https://console.cloud.google.com",children:"console.cloud.google.com"})]}),"\n",(0,r.jsx)(n.li,{children:"Select your project (or create one)"}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"IAM & Admin \u2192 Service Accounts"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"+ Create Service Account"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Service Account Details:\n  Name: sealmetrics-export\n  ID: sealmetrics-export\n  Description: Service account for Sealmetrics BigQuery export\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create and Continue"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-2-grant-permissions",children:"Step 2: Grant Permissions"}),"\n",(0,r.jsx)(n.p,{children:"Grant the service account BigQuery access:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Grant this service account access to project:\n\nRole 1: BigQuery Data Editor\n        (roles/bigquery.dataEditor)\n\nRole 2: BigQuery Job User\n        (roles/bigquery.jobUser)\n\n[Continue]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Alternatively, create a custom role with these permissions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"bigquery.datasets.create"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"bigquery.tables.create"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"bigquery.tables.updateData"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"bigquery.jobs.create"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-3-generate-credentials",children:"Step 3: Generate Credentials"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Click on the created service account"}),"\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Keys"})," tab"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Add Key \u2192 Create new key"})]}),"\n",(0,r.jsxs)(n.li,{children:["Choose ",(0,r.jsx)(n.strong,{children:"JSON"})," format"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create"})]}),"\n",(0,r.jsx)(n.li,{children:"Save the downloaded JSON file securely"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'// Downloaded file looks like:\n{\n  "type": "service_account",\n  "project_id": "your-project-id",\n  "private_key_id": "abc123...",\n  "private_key": "-----BEGIN PRIVATE KEY-----\\n...",\n  "client_email": "sealmetrics-export@your-project.iam.gserviceaccount.com",\n  "client_id": "123456789...",\n  ...\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-4-configure-in-sealmetrics",children:"Step 4: Configure in Sealmetrics"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Settings \u2192 Integrations \u2192 BigQuery"})]}),"\n",(0,r.jsx)(n.li,{children:"Upload your credentials:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'BigQuery Integration\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nStatus: Not Connected\n\nStep 1: Upload Credentials\n\n  [Upload JSON Key File]\n\n  Or paste JSON content:\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502 {                                       \u2502\n  \u2502   "type": "service_account",            \u2502\n  \u2502   ...                                   \u2502\n  \u2502 }                                       \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n[Verify Credentials]\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Verify credentials are valid"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-5-configure-sync-settings",children:"Step 5: Configure Sync Settings"}),"\n",(0,r.jsx)(n.h3,{id:"dataset-settings",children:"Dataset Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Dataset Configuration\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nGCP Project: your-project-id (from credentials)\n\nDataset Name: [sealmetrics_analytics       ]\n              (will be created if doesn't exist)\n\nLocation: [EU (europe-west1)              \u25bc]\n\nTable Prefix: [sm_                         ]\n              Tables will be named: sm_pageviews, sm_conversions, etc.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"sync-schedule",children:"Sync Schedule"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Sync Schedule\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nSync Frequency:\n\u25cb Hourly\n\u25cf Daily at [03:00] UTC\n\u25cb Weekly on [Sunday] at [03:00] UTC\n\nData to Export:\n\u2611 Pageviews\n\u2611 Events\n\u2611 Conversions\n\u2611 Sessions (aggregated)\n\u2610 Raw hits (high volume)\n\nHistorical Backfill:\n\u2611 Export historical data\n  From: [2024-01-01] (max 24 months)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"data-options",children:"Data Options"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Data Options\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\u2611 Include UTM parameters\n\u2611 Include device information\n\u2611 Include geographic data\n\u2610 Include IP addresses (privacy consideration)\n\u2611 Include custom dimensions\n\u2611 Include custom properties\n"})}),"\n",(0,r.jsx)(n.h2,{id:"step-6-activate-and-verify",children:"Step 6: Activate and Verify"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Activate Integration"})]}),"\n",(0,r.jsx)(n.li,{children:"Wait for initial sync (may take several hours for historical data)"}),"\n",(0,r.jsx)(n.li,{children:"Check status:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"BigQuery Integration Status\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nStatus: \u2705 Active\n\nLast Sync: Today at 03:15 UTC\nRecords Synced: 1,234,567\nNext Sync: Tomorrow at 03:00 UTC\n\nTables:\n  sm_pageviews     1,023,456 rows    Updated 03:15\n  sm_events          156,789 rows    Updated 03:15\n  sm_conversions      34,567 rows    Updated 03:15\n  sm_sessions         89,012 rows    Updated 03:15\n\n[View in BigQuery] [Sync Now] [Pause Integration]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"bigquery-schema",children:"BigQuery Schema"}),"\n",(0,r.jsxs)(n.h3,{id:"pageviews-table-sm_pageviews",children:["Pageviews Table (",(0,r.jsx)(n.code,{children:"sm_pageviews"}),")"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Unique pageview ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timestamp"})}),(0,r.jsx)(n.td,{children:"TIMESTAMP"}),(0,r.jsx)(n.td,{children:"When pageview occurred"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"session_id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Session identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Anonymous user ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"page_url"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Full page URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"page_path"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"URL path only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"page_title"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"HTML page title"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"referrer"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Referring URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"utm_source"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"UTM source"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"utm_medium"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"UTM medium"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"utm_campaign"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"UTM campaign"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device_type"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"mobile/desktop/tablet"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"browser"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Browser name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"os"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Operating system"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"country"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"ISO country code"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"region"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Region/state"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"city"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"City name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"content_group"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Content group assignment"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"custom_dimensions"})}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Custom dimensions object"})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"conversions-table-sm_conversions",children:["Conversions Table (",(0,r.jsx)(n.code,{children:"sm_conversions"}),")"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Unique conversion ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timestamp"})}),(0,r.jsx)(n.td,{children:"TIMESTAMP"}),(0,r.jsx)(n.td,{children:"When conversion occurred"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"session_id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Session identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Anonymous user ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"conversion_type"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Type/label"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"amount"})}),(0,r.jsx)(n.td,{children:"FLOAT"}),(0,r.jsx)(n.td,{children:"Conversion value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currency"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Currency code"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"order_id"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Order/transaction ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"utm_source"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Attributed source"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"utm_medium"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Attributed medium"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"utm_campaign"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Attributed campaign"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"attribution_model"})}),(0,r.jsx)(n.td,{children:"STRING"}),(0,r.jsx)(n.td,{children:"Model used"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"custom_properties"})}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Custom properties"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"example-queries",children:"Example Queries"}),"\n",(0,r.jsx)(n.h3,{id:"daily-traffic-summary",children:"Daily Traffic Summary"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT\n  DATE(timestamp) as date,\n  COUNT(*) as pageviews,\n  COUNT(DISTINCT session_id) as sessions,\n  COUNT(DISTINCT user_id) as users\nFROM `your-project.sealmetrics_analytics.sm_pageviews`\nWHERE timestamp >= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 30 DAY)\nGROUP BY date\nORDER BY date DESC\n"})}),"\n",(0,r.jsx)(n.h3,{id:"conversion-attribution",children:"Conversion Attribution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT\n  utm_source,\n  utm_medium,\n  COUNT(*) as conversions,\n  SUM(amount) as revenue,\n  AVG(amount) as avg_order_value\nFROM `your-project.sealmetrics_analytics.sm_conversions`\nWHERE timestamp >= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 30 DAY)\nGROUP BY utm_source, utm_medium\nORDER BY revenue DESC\n"})}),"\n",(0,r.jsx)(n.h3,{id:"traffic-by-content-group",children:"Traffic by Content Group"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT\n  content_group,\n  COUNT(*) as pageviews,\n  COUNT(DISTINCT user_id) as unique_users,\n  ROUND(AVG(time_on_page), 1) as avg_time_seconds\nFROM `your-project.sealmetrics_analytics.sm_pageviews`\nWHERE timestamp >= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 7 DAY)\n  AND content_group IS NOT NULL\nGROUP BY content_group\nORDER BY pageviews DESC\n"})}),"\n",(0,r.jsx)(n.h3,{id:"custom-dimension-analysis",children:"Custom Dimension Analysis"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT\n  JSON_VALUE(custom_dimensions, '$.customer_type') as customer_type,\n  COUNT(DISTINCT p.session_id) as sessions,\n  COUNT(c.id) as conversions,\n  SAFE_DIVIDE(COUNT(c.id), COUNT(DISTINCT p.session_id)) * 100 as conversion_rate\nFROM `your-project.sealmetrics_analytics.sm_pageviews` p\nLEFT JOIN `your-project.sealmetrics_analytics.sm_conversions` c\n  ON p.session_id = c.session_id\nWHERE p.timestamp >= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 30 DAY)\nGROUP BY customer_type\nORDER BY sessions DESC\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"permission-denied-error",children:'"Permission Denied" Error'}),"\n",(0,r.jsx)(n.p,{children:"Verify service account has:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"BigQuery Data Editor role"}),"\n",(0,r.jsx)(n.li,{children:"BigQuery Job User role"}),"\n",(0,r.jsx)(n.li,{children:"Access to the correct GCP project"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"sync-not-running",children:"Sync Not Running"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:'Check integration status is "Active"'}),"\n",(0,r.jsx)(n.li,{children:"Verify credentials haven't expired"}),"\n",(0,r.jsx)(n.li,{children:"Check GCP project billing is active"}),"\n",(0,r.jsxs)(n.li,{children:["Review error logs in ",(0,r.jsx)(n.strong,{children:"Settings \u2192 Integrations \u2192 BigQuery \u2192 Logs"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"missing-data",children:"Missing Data"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check date range matches expected data"}),"\n",(0,r.jsx)(n.li,{children:"Verify data options include needed fields"}),"\n",(0,r.jsx)(n.li,{children:"Check if data is still processing (1-2 hour delay)"}),"\n",(0,r.jsx)(n.li,{children:"Ensure table wasn't manually modified in BigQuery"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"high-costs",children:"High Costs"}),"\n",(0,r.jsx)(n.p,{children:"To reduce BigQuery costs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use partitioned tables (enabled by default)"}),"\n",(0,r.jsx)(n.li,{children:"Limit historical backfill"}),"\n",(0,r.jsx)(n.li,{children:"Use aggregated tables instead of raw hits"}),"\n",(0,r.jsx)(n.li,{children:"Set up BigQuery budget alerts"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"data-retention",children:"Data Retention"}),"\n",(0,r.jsx)(n.p,{children:"BigQuery data retention follows your settings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Data Retention in BigQuery\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\u25cf Match Sealmetrics retention (24 months)\n  Old data automatically deleted\n\n\u25cb Custom retention\n  Keep data for: [36] months\n\n\u25cb Keep indefinitely\n  Data never auto-deleted (you manage)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"costs",children:"Costs"}),"\n",(0,r.jsx)(n.h3,{id:"sealmetrics",children:"Sealmetrics"}),"\n",(0,r.jsx)(n.p,{children:"BigQuery integration is included free with Growth, Scale, Pro, and Enterprise plans."}),"\n",(0,r.jsx)(n.h3,{id:"google-cloud",children:"Google Cloud"}),"\n",(0,r.jsx)(n.p,{children:"You pay GCP directly for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Storage: ~$0.02/GB/month"}),"\n",(0,r.jsx)(n.li,{children:"Queries: ~$5/TB scanned"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Typical costs for mid-size site (1M events/month):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Storage: ~$1-2/month"}),"\n",(0,r.jsx)(n.li,{children:"Queries: Depends on usage, typically $5-20/month"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var s=i(96540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);