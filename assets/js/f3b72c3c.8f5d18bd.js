"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8908],{28453:(e,i,t)=>{t.d(i,{R:()=>d,x:()=>a});var n=t(96540);const s={},r=n.createContext(s);function d(e){const i=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),n.createElement(r.Provider,{value:i},e.children)}},92771:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"api/rate-limits","title":"Rate Limits","description":"Rate limits protect the API from abuse and ensure fair usage across all clients.","source":"@site/docs/api/rate-limits.mdx","sourceDirName":"api","slug":"/api/rate-limits","permalink":"/api/rate-limits","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":18,"frontMatter":{"sidebar_position":18,"title":"Rate Limits"},"sidebar":"tutorialSidebar","previous":{"title":"Auth Advanced","permalink":"/api/auth-advanced"},"next":{"title":"Batch API","permalink":"/api/batch"}}');var s=t(74848),r=t(28453);const d={sidebar_position:18,title:"Rate Limits"},a="Rate Limits",l={},c=[{value:"Rate Limit Headers",id:"rate-limit-headers",level:2},{value:"Rate Limit Exceeded (429)",id:"rate-limit-exceeded-429",level:2},{value:"Soft Limiting Behavior",id:"soft-limiting-behavior",level:2},{value:"Per-Endpoint Adjustments",id:"per-endpoint-adjustments",level:2},{value:"Endpoints Without Rate Limits",id:"endpoints-without-rate-limits",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Monitor Rate Limit Headers",id:"1-monitor-rate-limit-headers",level:3},{value:"2. Implement Exponential Backoff",id:"2-implement-exponential-backoff",level:3},{value:"3. Cache Responses",id:"3-cache-responses",level:3},{value:"4. Batch Requests When Possible",id:"4-batch-requests-when-possible",level:3},{value:"5. Use Webhooks for Real-Time Data",id:"5-use-webhooks-for-real-time-data",level:3},{value:"Enterprise Custom Limits",id:"enterprise-custom-limits",level:2}];function o(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"rate-limits",children:"Rate Limits"})}),"\n",(0,s.jsx)(i.p,{children:"Rate limits protect the API from abuse and ensure fair usage across all clients."}),"\n",(0,s.jsx)(i.h2,{id:"rate-limit-headers",children:"Rate Limit Headers"}),"\n",(0,s.jsx)(i.p,{children:"Every API response includes these headers:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Header"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"X-RateLimit-Limit"})}),(0,s.jsx)(i.td,{children:"Max requests per minute for your plan"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"120"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"X-RateLimit-Remaining"})}),(0,s.jsx)(i.td,{children:"Requests remaining in current window"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"95"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"X-RateLimit-Reset"})}),(0,s.jsx)(i.td,{children:"Unix timestamp when window resets"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1704067200"})})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"Example response headers:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-http",children:"HTTP/1.1 200 OK\nX-RateLimit-Limit: 120\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1704067200\nContent-Type: application/json\n"})}),"\n",(0,s.jsx)(i.h2,{id:"rate-limit-exceeded-429",children:"Rate Limit Exceeded (429)"}),"\n",(0,s.jsx)(i.p,{children:"When you exceed the limit, you receive:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-http",children:"HTTP/1.1 429 Too Many Requests\nRetry-After: 15\nX-RateLimit-Limit: 120\nX-RateLimit-Remaining: 0\nX-RateLimit-Reset: 1704067200\nContent-Type: application/json\n"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "error": {\n    "code": "rate_limit_exceeded",\n    "message": "Too many requests. Please retry after 15 seconds."\n  },\n  "request_id": "req_abc123"\n}\n'})}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"Retry-After"})," header indicates how many seconds to wait."]}),"\n",(0,s.jsx)(i.h2,{id:"soft-limiting-behavior",children:"Soft Limiting Behavior"}),"\n",(0,s.jsx)(i.p,{children:"Before rejecting requests, the API applies soft limiting:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Usage"}),(0,s.jsx)(i.th,{children:"Behavior"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"0-80%"}),(0,s.jsx)(i.td,{children:"Normal response"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"80-100%"}),(0,s.jsxs)(i.td,{children:["Normal response + ",(0,s.jsx)(i.code,{children:"X-RateLimit-Warning: approaching_limit"})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:">100%"}),(0,s.jsx)(i.td,{children:"Requests delayed (throttled)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Sustained >100%"}),(0,s.jsx)(i.td,{children:"429 Too Many Requests"})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"This gives you time to reduce request rate before hitting hard limits."}),"\n",(0,s.jsx)(i.h2,{id:"per-endpoint-adjustments",children:"Per-Endpoint Adjustments"}),"\n",(0,s.jsx)(i.p,{children:"Some endpoints have lower limits due to query complexity:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Endpoint Pattern"}),(0,s.jsx)(i.th,{children:"Limit Adjustment"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/sites/{id}/stats"})}),(0,s.jsx)(i.td,{children:"50% of plan limit"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/sites/{id}/funnel"})}),(0,s.jsx)(i.td,{children:"50% of plan limit"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"All other endpoints"}),(0,s.jsx)(i.td,{children:"100% of plan limit"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"endpoints-without-rate-limits",children:"Endpoints Without Rate Limits"}),"\n",(0,s.jsx)(i.p,{children:"These endpoints are excluded from rate limiting:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/health"})," - Health check"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/livez"})," - Liveness probe"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/readyz"})," - Readiness probe"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/docs"})," - Swagger documentation"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/redoc"})," - ReDoc documentation"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/openapi.json"})," - OpenAPI specification"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(i.h3,{id:"1-monitor-rate-limit-headers",children:"1. Monitor Rate Limit Headers"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"def make_request(url, headers):\n    response = requests.get(url, headers=headers)\n\n    remaining = int(response.headers.get('X-RateLimit-Remaining', 0))\n    if remaining < 10:\n        print(f\"Warning: Only {remaining} requests remaining\")\n\n    return response\n"})}),"\n",(0,s.jsx)(i.h3,{id:"2-implement-exponential-backoff",children:"2. Implement Exponential Backoff"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"import time\nimport random\n\ndef request_with_backoff(url, headers, max_retries=5):\n    for attempt in range(max_retries):\n        response = requests.get(url, headers=headers)\n\n        if response.status_code != 429:\n            return response\n\n        retry_after = int(response.headers.get('Retry-After', 1))\n        # Add jitter to prevent thundering herd\n        sleep_time = retry_after + random.uniform(0, 1)\n        time.sleep(sleep_time)\n\n    raise Exception(\"Max retries exceeded\")\n"})}),"\n",(0,s.jsx)(i.h3,{id:"3-cache-responses",children:"3. Cache Responses"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"from functools import lru_cache\nimport time\n\n# Cache stats for 5 minutes\n@lru_cache(maxsize=100)\ndef get_stats_cached(site_id, period, cache_key):\n    return get_stats(site_id, period)\n\ndef get_stats(site_id, period):\n    # Create cache key that expires every 5 minutes\n    cache_key = int(time.time() / 300)\n    return get_stats_cached(site_id, period, cache_key)\n"})}),"\n",(0,s.jsx)(i.h3,{id:"4-batch-requests-when-possible",children:"4. Batch Requests When Possible"}),"\n",(0,s.jsx)(i.p,{children:"Instead of:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"# Bad: 10 separate requests\nfor site_id in site_ids:\n    stats = get_stats(site_id)\n"})}),"\n",(0,s.jsx)(i.p,{children:"Consider:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"# Better: Fewer requests with more data per request\nstats = get_stats_batch(site_ids)  # If batch endpoint available\n"})}),"\n",(0,s.jsx)(i.h3,{id:"5-use-webhooks-for-real-time-data",children:"5. Use Webhooks for Real-Time Data"}),"\n",(0,s.jsx)(i.p,{children:"For real-time updates, use webhooks instead of polling:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"# Bad: Polling every second (60 req/min just for one metric)\nwhile True:\n    stats = get_stats(site_id)\n    time.sleep(1)\n\n# Better: Configure webhook for real-time updates\n# (No API calls needed - data pushed to you)\n"})}),"\n",(0,s.jsx)(i.h2,{id:"enterprise-custom-limits",children:"Enterprise Custom Limits"}),"\n",(0,s.jsx)(i.p,{children:"Enterprise plans can negotiate custom limits:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Per-endpoint limits"}),"\n",(0,s.jsx)(i.li,{children:"Higher burst allowances"}),"\n",(0,s.jsx)(i.li,{children:"Dedicated API instances"}),"\n",(0,s.jsx)(i.li,{children:"SLA guarantees"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Contact ",(0,s.jsx)(i.a,{href:"mailto:sales@sealmetrics.com",children:"sales@sealmetrics.com"})," for Enterprise pricing."]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);