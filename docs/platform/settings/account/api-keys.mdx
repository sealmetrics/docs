---
sidebar_position: 3
title: API Keys
description: Create and manage API keys for programmatic access to Sealmetrics.
---

# API Keys

Generate API keys to access Sealmetrics data programmatically.

## Overview

API keys allow you to:
- Query reports via REST API
- Send conversion data
- Build custom integrations
- Automate data exports

## Accessing API Key Settings

1. Click the **gear icon** in the main navigation
2. Select **Account → API Keys**

## Current API Keys

View all active API keys:

```
API Keys
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Name                Created       Last Used      Status
────────────────────────────────────────────────────────
Production API      Jan 1, 2024   Today 14:32    Active
Data Warehouse      Dec 15, 2023  Yesterday      Active
Test Environment    Nov 20, 2023  Nov 25, 2023   Active
Old Integration     Sep 1, 2023   Oct 1, 2023    Expired

[+ Create API Key]
```

## Creating an API Key

### Step 1: Basic Information

1. Click **+ Create API Key**
2. Enter details:

```
Create API Key
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Name: [BigQuery Sync                       ]

Description (optional):
[Used for nightly data sync to BigQuery    ]
```

### Step 2: Set Permissions

Choose what the key can access:

```
Permissions
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Scope:
● Read-only (recommended for most uses)
○ Read & Write
○ Full access (admin)

Specific permissions:
☑ Read reports data
☑ Read account information
☐ Write conversions
☐ Manage settings
☐ Manage users

Account access:
● All accounts
○ Selected accounts only
```

### Step 3: Set Expiration

```
Expiration
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

● Never expires
○ Expires on: [Select date]
○ Expires in: [30] days

Recommended: Set expiration for temporary
integrations or testing.
```

### Step 4: Create and Copy

```
API Key Created
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚠️ Copy this key now - it won't be shown again!

sm_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxx

[Copy to Clipboard]

Store this key securely:
• Don't commit to version control
• Use environment variables
• Rotate regularly
```

:::warning Important
The full API key is only shown once. Store it securely immediately.
:::

## Permission Scopes

### Read-Only Scope

Can read but not modify:

| Endpoint | Access |
|----------|--------|
| `GET /api/report/*` | ✅ |
| `GET /api/auth/accounts` | ✅ |
| `POST /api/*` | ❌ |

### Read & Write Scope

Can read and send data:

| Endpoint | Access |
|----------|--------|
| `GET /api/report/*` | ✅ |
| `POST /api/conversions` | ✅ |
| `POST /api/events` | ✅ |
| `DELETE /api/*` | ❌ |

### Full Access Scope

Admin-level access:

| Endpoint | Access |
|----------|--------|
| All `GET` endpoints | ✅ |
| All `POST` endpoints | ✅ |
| Settings endpoints | ✅ |
| User management | ❌ (use dashboard) |

## Using API Keys

### Authentication

Include the API key in the Authorization header:

```bash
curl https://app.sealmetrics.com/api/report/pages \
  -H "Authorization: Bearer sm_live_your_key..."
```

### Example: Fetch Traffic Data

```python
import requests

API_KEY = "sm_live_your_key..."
ACCOUNT_ID = "acc_xyz789..."

response = requests.get(
    "https://app.sealmetrics.com/api/report/pages",
    headers={"Authorization": f"Bearer {API_KEY}"},
    params={
        "account_id": ACCOUNT_ID,
        "date_range": "last_7_days"
    }
)

data = response.json()
print(f"Total pageviews: {sum(p['views'] for p in data['data'])}")
```

### Example: Send Conversion

```javascript
const API_KEY = "sm_live_your_key...";

const response = await fetch("https://app.sealmetrics.com/api/conversions", {
  method: "POST",
  headers: {
    "Authorization": `Bearer ${API_KEY}`,
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    account_id: "acc_xyz789...",
    conversion_id: "order_12345",
    amount: 149.99,
    currency: "EUR",
    utm_source: "google",
    utm_medium: "cpc"
  })
});
```

## Managing API Keys

### View Key Details

Click on any key to see:

```
API Key: Production API
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Created:      January 1, 2024
Created by:   admin@company.com
Last used:    Today at 14:32
Expires:      Never

Key prefix:   sm_live_your_key...
Scope:        Read-only
Accounts:     All accounts

Usage (last 30 days):
• Total requests: 15,432
• Successful: 15,398 (99.8%)
• Failed: 34 (0.2%)

[View Usage Details] [Revoke Key]
```

### Rotate a Key

Create a new key to replace an existing one:

1. Create new key with same permissions
2. Update your applications
3. Verify new key works
4. Revoke old key

### Revoke a Key

Immediately disable a key:

1. Find the key in the list
2. Click **Revoke Key**
3. Confirm revocation

```
Revoke API Key
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Are you sure you want to revoke "Production API"?

This will immediately:
• Block all requests using this key
• Break any integrations using it
• This cannot be undone

[Cancel] [Revoke Key]
```

## Rate Limits

API keys have rate limits based on your plan:

| Plan | Requests/min | Burst |
|------|--------------|-------|
| Research | 30 | 50 |
| Guard | 60 | 100 |
| Growth | 120 | 200 |

### Rate Limit Headers

Every response includes:

```
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 45
X-RateLimit-Reset: 1705320000
```

### Handling Rate Limits

When rate limited (HTTP 429):

```json
{
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Too many requests",
    "retry_after": 60
  }
}
```

Implement exponential backoff:

```python
import time

def api_request_with_retry(url, headers, max_retries=3):
    for attempt in range(max_retries):
        response = requests.get(url, headers=headers)

        if response.status_code == 429:
            retry_after = int(response.headers.get('Retry-After', 60))
            time.sleep(retry_after)
            continue

        return response

    raise Exception("Max retries exceeded")
```

## Security Best Practices

### Do's

- ✅ Use environment variables for keys
- ✅ Set minimum required permissions
- ✅ Set expiration for temporary use
- ✅ Rotate keys regularly (every 90 days)
- ✅ Use separate keys for different environments

### Don'ts

- ❌ Don't commit keys to version control
- ❌ Don't share keys between applications
- ❌ Don't use admin keys when read-only works
- ❌ Don't embed keys in client-side code

### Secure Storage

```bash
# Good: Environment variable
export SEALMETRICS_API_KEY="sm_live_your_key..."

# Good: .env file (not committed)
SEALMETRICS_API_KEY=sm_live_your_key...

# Bad: Hardcoded in source
API_KEY = "sm_live_your_key..."  # Don't do this!
```

## Troubleshooting

### "Invalid API Key"

- Check key is copied correctly (no extra spaces)
- Verify key hasn't been revoked
- Ensure key hasn't expired

### "Insufficient Permissions"

- Check key has required scope
- Verify account access includes target account

### "Rate Limit Exceeded"

- Implement backoff/retry logic
- Consider upgrading plan for higher limits
- Optimize requests (batch where possible)
